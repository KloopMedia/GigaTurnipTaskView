{"version":3,"sources":["config/Urls.js","util/Axios.js","util/Firebase.js","components/custom-widgets/file-widget/Upload.js","components/custom-widgets/file-widget/LinearProgressWithLabel.tsx","components/custom-widgets/file-widget/CustomFileWidget.tsx","util/Auth.js","components/text-editor/TextViewer.tsx","components/tasks/Task.tsx","config/Config.js","util/Util.tsx","components/appbar/Appbar.tsx","components/appbar/SimpleAppbar.tsx","components/campaigns/CampaignCard.tsx","components/campaigns/Campaigns.tsx","components/Tabs/TabPanel.tsx","components/Tabs/Tabs.tsx","components/tasks/TaskCard.tsx","components/tasks/TaskList.tsx","components/tasks/TaskMenu.tsx","components/campaigns/About.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["campaignsUrl","taskstagesUrl","tasksUrl","instance","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","provider","auth","GoogleAuthProvider","firestore","settings","ignoreUndefinedProperties","signInWithGoogle","setCustomParameters","prompt","signInWithPopup","signOut","then","removeItem","window","location","reload","returnNewState","prevState","update","multiple","upload","files","storageRef","setFileBeingUploaded","setFileLinks","a","all","map","file","snap","child","name","put","status","progress","on","storage","TaskEvent","STATE_CHANGED","snapshot","bytesTransferred","totalBytes","console","log","ref","getDownloadURL","downloadURL","fullPath","filePath","fileLink","url","LinearProgressWithLabel","props","Box","display","alignItems","width","mr","LinearProgress","variant","minWidth","Typography","color","Math","round","value","CustomFileWidget","schema","uiSchema","disabled","formContext","campaignId","chainId","stageId","userId","taskId","useState","uploadedFiles","setUploadedFiles","fileLinks","currentFile","setCurrentFile","isImageOpen","setIsImageOpen","isVideoOpen","setIsVideoOpen","fileType","setFileType","privateUpload","private","multipleSelect","pathToFolder","undefined","useEffect","parsed","JSON","parse","Object","keys","forEach","filename","getDownloadUrl","handleChange","event","target","path","stringify","allFiles","onChange","handleFileClick","getMetadata","metadata","type","contentType","split","alert","closeViewer","src","disableScroll","backgroundStyle","backgroundColor","closeOnClickOutside","onClose","Dialog","open","fullWidth","height","controls","className","title","i","style","onClick","fontSize","padding","margin","links","uploaded","deleteFile","AuthContext","React","createContext","AuthProvider","children","currentUser","setCurrentUser","onAuthStateChanged","user","getIdToken","idToken","setItem","onIdTokenChanged","Provider","TextViewer","data","id","toolbar","inline","tinymceScriptSrc","process","init","plugins","menubar","image_advtab","importcss_append","Task","useParams","history","useHistory","useContext","setSchema","setUiSchema","formResponses","setFormResponses","complete","setComplete","prevTasks","setPrevTasks","dataForStoragePath","setDataForStoragePath","editorData","setEditorData","loader","setLoader","widgets","customfile","getTask","caseId","get","res","task","stage","rich_text","toString","chain","uid","parsed_schema","json_schema","parsed_ui","ui_schema","case","prevStages","displayed_prev_stages","inTasksPromise","t","results","tt","brokenUi","r","fixedUi","responses","flat","inTasks","setData","paddingBottom","length","Grid","align","formData","e","onSubmit","patch","push","Button","paddingLeft","CircularProgress","projectName","getUserCampaigns","drawerWidth","useStyles","makeStyles","theme","createStyles","root","appBar","zIndex","drawer","transition","transitions","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","spacing","breakpoints","up","justifyContent","mixins","content","flexGrow","formControl","selectEmpty","marginTop","select","selectIcon","fill","top","Appbar","classes","useTheme","campaign","setCampaign","allCampaigns","setAllCampaigns","CssBaseline","AppBar","position","clsx","Toolbar","noWrap","cursor","email","FormControl","size","Select","autoWidth","labelId","label","disableUnderline","inputProps","icon","camp","MenuItem","extra","marginBottom","ParentCard","description","onCardButtonClick","openCampaignInfo","selectable","Card","CardContent","component","gutterBottom","CardActions","Builder","userCampaigns","setUserCampaigns","selectableCampaigns","setSelectableCampaigns","handleCardRedirect","container","item","TabPanel","index","other","role","hidden","p","a11yProps","palette","background","paper","SimpleTabs","Tabs","centered","Tab","showSelectable","TaskCard","creatable","handleOpen","pathname","handleCreate","post","requestTaskCreation","catch","err","handleSelectable","requestTaskAssignment","TaskList","tasks","direction","TaskMenu","setValue","selectableTasks","setSelectableTasks","completeTasks","setCompleteTasks","openTasks","setOpenTasks","creatableTasks","setCreatableTasks","getSelectableTasks","getCompleteTasks","getOpenTasks","getCreatableTasks","newValue","About","setName","setDescription","richText","setRichText","requestCampaignJoin","App","exact","SimpleAppbar","Campaigns","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5891b15e.chunk.js","sourcesContent":["const baseUrl = \"https://journal-bb5e3.uc.r.appspot.com/\"\r\n// const baseUrl = \"http://127.0.0.1:8000/\"\r\nconst campaignsUrl = \"api/v1/campaigns/\"\r\nconst chainsUrl = \"api/v1/chains/\"\r\nconst taskstagesUrl = \"api/v1/taskstages/\"\r\nconst webhookstagesUrl = \"api/v1/webhookstages/\"\r\nconst conditionalstagesUrl = \"api/v1/conditionalstages/\"\r\nconst casesUrl = \"api/v1/cases/\"\r\nconst tasksUrl = \"api/v1/tasks/\"\r\n\r\nexport {\r\n    baseUrl,\r\n    campaignsUrl,\r\n    chainsUrl,\r\n    taskstagesUrl,\r\n    webhookstagesUrl,\r\n    conditionalstagesUrl,\r\n    casesUrl,\r\n    tasksUrl\r\n}","import axios from \"axios\";\r\nimport {baseUrl} from \"../config/Urls\";\r\n\r\nconst instance = axios.create({\r\n    baseURL: baseUrl\r\n});\r\n\r\ninstance.interceptors.request.use(\r\n    function (config) {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            config.headers[\"Authorization\"] = 'JWT ' + token;\r\n        }\r\n        return config;\r\n    },\r\n    function (error) {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default instance;","import firebase from 'firebase';\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCXiwOUNsbzKH7sbSAZrqA9f7VOeCMdUOQ\",\r\n    authDomain: \"gigaturnip-b6b5b.firebaseapp.com\",\r\n    projectId: \"gigaturnip-b6b5b\",\r\n    storageBucket: \"gigaturnip-b6b5b.appspot.com\",\r\n    messagingSenderId: \"414429242328\",\r\n    appId: \"1:414429242328:web:a4685f5ac6895ea767c8ad\",\r\n    measurementId: \"G-Y8JTEJMTET\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n// const db = firebase.firestore();\r\n// if (window.location.hostname === \"localhost\") {\r\n//   db.useEmulator(\"localhost\", 8080);\r\n// }\r\n\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nfirebase.firestore().settings({\r\n    ignoreUndefinedProperties: true,\r\n})\r\nexport const signInWithGoogle = () => {\r\n    provider.setCustomParameters({\r\n        prompt: 'select_account'\r\n    });\r\n    return firebase.auth().signInWithPopup(provider);\r\n};\r\n\r\nexport const signOut = () => {\r\n    return firebase.auth().signOut()\r\n        .then(() => localStorage.removeItem(\"token\"))\r\n        .then(() => window.location.reload(false))\r\n}\r\n\r\nexport default firebase;","import firebase from '../../../util/Firebase'\r\n\r\nconst returnNewState = (prevState, update, multiple) => {\r\n    if (multiple) {\r\n        if (prevState) {\r\n            return {...prevState, ...update}\r\n        } else {\r\n            return update\r\n        }\r\n    } else {\r\n        return update\r\n    }\r\n}\r\n\r\nconst upload = async (files, storageRef, setFileBeingUploaded, setFileLinks, multiple) => {\r\n    if (storageRef) {\r\n        if (!multiple) {\r\n            setFileBeingUploaded({})\r\n            setFileLinks({})\r\n        }\r\n        await Promise.all(files.map(async file => {\r\n            const snap = storageRef.child(file.name).put(file)\r\n            setFileBeingUploaded(prevState => {\r\n                const update = {[file.name]: {status: \"loading\", progress: 0}}\r\n                return prevState ? {...prevState, ...update} : update\r\n            })\r\n\r\n            // Listen for state changes, errors, and completion of the upload.\r\n            snap.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\r\n                snapshot => {\r\n                    // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\r\n                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                    setFileBeingUploaded(prevState => {\r\n                        const update = {[file.name]: {status: \"loading\", progress: progress}}\r\n                        return prevState ? {...prevState, ...update} : update\r\n                    })\r\n                },\r\n                error => {\r\n                    console.log(error)\r\n                },\r\n                () => {\r\n                    // Upload completed successfully, now we can get the download URL\r\n                    snap.snapshot.ref.getDownloadURL().then(downloadURL => {\r\n                        console.log(\"FILE PATH\", snap.snapshot.ref.fullPath)\r\n                        const filePath = snap.snapshot.ref.fullPath\r\n                        const fileLink = downloadURL\r\n                        setFileBeingUploaded(prevState => {\r\n                            const update = {[file.name]: {status: \"complete\", progress: 100, url: fileLink}}\r\n                            return returnNewState(prevState, update, multiple)\r\n                        })\r\n                        setFileLinks(prevState => {\r\n                            const update = {[file.name]: filePath}\r\n                            return returnNewState(prevState, update, multiple)\r\n                        })\r\n                    });\r\n                });\r\n        }))\r\n    }\r\n    ;\r\n}\r\n\r\nexport default upload","import React, {useState} from 'react'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\nimport Box from '@material-ui/core/Box'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst LinearProgressWithLabel = (props: any) => {\r\n    return (\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n            <Box width=\"100%\" mr={1}>\r\n                <LinearProgress variant=\"determinate\" {...props} />\r\n            </Box>\r\n            <Box minWidth={35}>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n                    props.value,\r\n                )}%`}</Typography>\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default LinearProgressWithLabel","import React, {useEffect, useState} from 'react'\r\nimport firebase from '../../../util/Firebase'\r\nimport upload from \"./Upload\";\r\nimport LinearProgressWithLabel from \"./LinearProgressWithLabel\";\r\nimport ImageViewer from 'react-simple-image-viewer';\r\nimport {Dialog} from \"@material-ui/core\";\r\n\r\n\r\nconst CustomFileWidget = (props: any) => {\r\n    const {schema, uiSchema, disabled, name, formContext, value} = props;\r\n    const {campaignId, chainId, stageId, userId, taskId} = formContext;\r\n    const [uploadedFiles, setUploadedFiles] = useState<any>({})\r\n    const [fileLinks, setFileLinks] = useState<any>({})\r\n    const [currentFile, setCurrentFile] = useState(\"\")\r\n    const [isImageOpen, setIsImageOpen] = useState(false);\r\n    const [isVideoOpen, setIsVideoOpen] = useState(false);\r\n    const [fileType, setFileType] = useState(\"\")\r\n\r\n    const privateUpload = uiSchema[\"ui:options\"] && uiSchema[\"ui:options\"].private ? uiSchema[\"ui:options\"].private : false\r\n    const multipleSelect = uiSchema[\"ui:options\"] && uiSchema[\"ui:options\"].multiple ? uiSchema[\"ui:options\"].multiple : false\r\n\r\n    let pathToFolder: any = undefined\r\n    if (campaignId && chainId && stageId && userId && taskId) {\r\n        pathToFolder = firebase.storage()\r\n        if (privateUpload) {\r\n            pathToFolder = pathToFolder.ref(\"private\")\r\n        } else {\r\n            pathToFolder = pathToFolder.ref(\"public\")\r\n        }\r\n        pathToFolder = pathToFolder.child(campaignId)\r\n            .child(chainId)\r\n            .child(stageId)\r\n            .child(userId)\r\n            .child(taskId)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"value\", value)\r\n        console.log(\"uiSchema\", uiSchema)\r\n        if (value) {\r\n            try {\r\n                const parsed = JSON.parse(value)\r\n                Object.keys(parsed).forEach(filename => {\r\n                    getDownloadUrl(parsed[filename])\r\n                        .then(url => setUploadedFiles((prevState: any) => ({\r\n                            ...prevState,\r\n                            [filename]: {url: url, status: \"complete\"}\r\n                        })))\r\n                })\r\n            } catch (error) {\r\n                // setFileBeingUploaded({})\r\n            }\r\n        }\r\n    }, [value])\r\n\r\n    const handleChange = async (event: any) => {\r\n        console.log(\"Files selected: \", [...event.target.files,])\r\n        upload([...event.target.files], pathToFolder, setUploadedFiles, setFileLinks, multipleSelect)\r\n    };\r\n\r\n    const getDownloadUrl = (path: string) => {\r\n        return firebase.storage().ref(path).getDownloadURL()\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (fileLinks) {\r\n            console.log(\"fileLinks\", fileLinks)\r\n            try {\r\n                let stringify = \"\";\r\n                if (multipleSelect) {\r\n                    const parsed = JSON.parse(value);\r\n                    const allFiles = {...parsed, ...fileLinks};\r\n                    stringify = JSON.stringify(allFiles);\r\n                } else {\r\n                    stringify = JSON.stringify(fileLinks);\r\n                }\r\n                props.onChange(stringify);\r\n            } catch (error) {\r\n                const stringify = JSON.stringify(fileLinks)\r\n                props.onChange(stringify)\r\n            }\r\n        }\r\n    }, [fileLinks])\r\n\r\n    const deleteFile = (filename: string) => {\r\n        const parsed = JSON.parse(value)\r\n        if (filename in parsed) {\r\n            delete parsed[filename]\r\n            const stringify = JSON.stringify(parsed)\r\n            props.onChange(stringify)\r\n        }\r\n\r\n        const links = {...fileLinks}\r\n        if (filename in links) {\r\n            delete links[filename]\r\n            setFileLinks(links)\r\n        }\r\n\r\n        const uploaded = {...uploadedFiles}\r\n        if (filename in uploaded) {\r\n            delete uploaded[filename]\r\n            setUploadedFiles(uploaded)\r\n        }\r\n    };\r\n\r\n    const handleFileClick = async (filename: string) => {\r\n        const parsed = JSON.parse(value);\r\n        const path = parsed[filename];\r\n        console.log(path)\r\n        const metadata = await firebase.storage().ref().child(path).getMetadata()\r\n        const type = metadata.contentType.split(\"/\")[0]\r\n        console.log(\"FILE TYPE\", type)\r\n        switch (type) {\r\n            case \"image\":\r\n                setCurrentFile(uploadedFiles[filename].url);\r\n                setFileType(metadata.contentType);\r\n                setIsImageOpen(true);\r\n                break;\r\n            case \"video\":\r\n                setCurrentFile(uploadedFiles[filename].url);\r\n                setFileType(metadata.contentType);\r\n                setIsVideoOpen(true);\r\n                break;\r\n            default:\r\n                // window.open(uploadedFiles[filename].url, '_blank');\r\n                alert(\"Файл не является фото или видео\")\r\n        }\r\n    }\r\n\r\n    const closeViewer = () => {\r\n        setCurrentFile(\"\")\r\n        setFileType(\"\");\r\n        setIsImageOpen(false);\r\n        setIsVideoOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {isImageOpen && <ImageViewer\r\n                src={[currentFile]}\r\n                disableScroll={false}\r\n                backgroundStyle={{\r\n                    backgroundColor: \"rgba(0,0,0,0.8)\"\r\n                }}\r\n                closeOnClickOutside={true}\r\n                onClose={closeViewer}\r\n            />}\r\n            <Dialog\r\n                open={isVideoOpen}\r\n                onClose={closeViewer}\r\n                fullWidth={true}\r\n            >\r\n                    <video height=\"360px\" controls>\r\n                        <source src={currentFile} type={fileType}/>\r\n                        Your browser does not support the video tag.\r\n                    </video>\r\n            </Dialog>\r\n\r\n            <label className={\"form-label\"}>{schema?.title}</label>\r\n            <br/>\r\n            <input disabled={disabled} multiple={multipleSelect} type=\"file\" onChange={handleChange}/>\r\n\r\n            {Object.keys(uploadedFiles).map((filename, i) =>\r\n                <div key={filename}>\r\n                    <div style={{display: \"flex\", alignItems: \"baseline\"}}>\r\n                        <p>{filename}</p>\r\n                        {uploadedFiles[filename].status === 'complete' &&\r\n                        <div style={{display: \"flex\", alignItems: \"baseline\"}}>\r\n                            <button\r\n                                onClick={() => handleFileClick(filename)}\r\n                                style={{fontSize: \"14px\", padding: 0, margin: \"0 10px\"}}\r\n                                type=\"button\"\r\n                                className=\"btn btn-link text-success\"\r\n                            >\r\n                                посмотреть файл\r\n                            </button>\r\n                            {!disabled &&\r\n                            <button\r\n                                onClick={() => deleteFile(filename)}\r\n                                style={{fontSize: \"14px\", padding: 0, margin: \"0 10px\"}}\r\n                                type=\"button\"\r\n                                className=\"btn btn-link text-danger\"\r\n                            >\r\n                                удалить\r\n                            </button>}\r\n                        </div>\r\n                        }\r\n                    </div>\r\n                    {uploadedFiles[filename].status === 'loading' &&\r\n                    <LinearProgressWithLabel value={uploadedFiles[filename].progress}/>}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CustomFileWidget","import React, {useEffect, useState} from \"react\";\r\nimport firebase from \"./Firebase\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({children}) => {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n            if (user) {\r\n                setCurrentUser(user)\r\n                user.getIdToken(true).then((idToken) => {\r\n                    localStorage.setItem(\"token\", idToken);\r\n                })\r\n            }\r\n        });\r\n        firebase.auth().onIdTokenChanged(user => {\r\n            if (user) {\r\n                user.getIdToken(false).then((idToken) => {\r\n                    localStorage.setItem(\"token\", idToken);\r\n                })\r\n            }\r\n        })\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                currentUser\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n","import {Editor} from \"@tinymce/tinymce-react\";\r\nimport React from \"react\";\r\n\r\n\r\nconst TextViewer = (props: {data: string}) => {\r\n    const {data} = props;\r\n\r\n    return (\r\n        <Editor\r\n            id={\"ViewerTinyMCE\"}\r\n            value={data}\r\n            toolbar={false}\r\n            inline={false}\r\n            disabled={true}\r\n            tinymceScriptSrc={process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'}\r\n            init={{\r\n                plugins: 'autoresize',\r\n                menubar: false,\r\n                image_advtab: true,\r\n                importcss_append: true,\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default TextViewer","import React, {useContext, useEffect, useState} from \"react\";\r\nimport Form from \"@rjsf/bootstrap-4\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport axios from \"../../util/Axios\";\r\nimport {tasksUrl} from '../../config/Urls'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport CustomFileWidget from \"../custom-widgets/file-widget/CustomFileWidget\";\r\nimport {Button} from \"react-bootstrap\";\r\nimport {Box, CircularProgress, Grid, Typography} from \"@material-ui/core\";\r\nimport {AuthContext} from \"../../util/Auth\";\r\nimport TextViewer from \"../text-editor/TextViewer\";\r\n\r\ntype RouterParams = { id: string, campaignId: string }\r\ntype dataForStoragePathParams = { campaignId: number, chainId: number, stageId: number, userId: string, taskId: number }\r\n\r\nconst Task = () => {\r\n    const {id, campaignId} = useParams<RouterParams>();\r\n    const history = useHistory()\r\n    const {currentUser} = useContext(AuthContext)\r\n    const path = `/campaign/${campaignId}/tasks`\r\n\r\n    const [schema, setSchema] = useState({})\r\n    const [uiSchema, setUiSchema] = useState({})\r\n    const [formResponses, setFormResponses] = useState<any>({})\r\n    const [complete, setComplete] = useState(false)\r\n    const [prevTasks, setPrevTasks] = useState<any>([])\r\n    const [dataForStoragePath, setDataForStoragePath] = useState<dataForStoragePathParams | {}>({})\r\n    const [editorData, setEditorData] = useState(\"\")\r\n    const [loader, setLoader] = useState(false)\r\n\r\n    const widgets = {\r\n        customfile: CustomFileWidget\r\n    };\r\n\r\n    useEffect(() => {\r\n        const getTask = (stageId?: string | number, caseId?: string | number) => {\r\n            if (stageId && caseId) {\r\n                return axios\r\n                    .get(`${tasksUrl}?stage__chain__campaign=${campaignId}&stage=${stageId}&case=${caseId}`)\r\n                    .then((res: any) => res.data)\r\n            }\r\n            return axios.get(tasksUrl + id + '/').then((res: any) => res.data)\r\n        }\r\n        const setData = async () => {\r\n            let task = await getTask()\r\n            let stage = task.stage\r\n\r\n            if (stage && stage.rich_text) {\r\n                setEditorData(stage.rich_text)\r\n            }\r\n\r\n            setDataForStoragePath({\r\n                campaignId: campaignId.toString(),\r\n                chainId: stage.chain.id.toString(),\r\n                stageId: stage.id.toString(),\r\n                userId: currentUser.uid,\r\n                taskId: task.id.toString()\r\n            })\r\n\r\n            let parsed_schema = JSON.parse(stage.json_schema) ?? {}\r\n            let parsed_ui = JSON.parse(stage.ui_schema) ?? {}\r\n            let caseId = task.case\r\n            let prevStages = stage.displayed_prev_stages\r\n            console.log(prevStages)\r\n            let inTasksPromise = prevStages.map((stageId: number | string) => getTask(stageId, caseId))\r\n            let inTasks = await Promise.all(inTasksPromise)\r\n                .then(res => {\r\n                    console.log(res)\r\n                    return res.map((t: any) => {\r\n                        return t.results.map((tt: any) => {\r\n                            let brokenUi = JSON.parse(tt.stage.ui_schema)\r\n                            let {file, ...r} = brokenUi\r\n                            if (file && file[\"ui:widget\"] !== \"customfile\") {\r\n                                file = {\"ui:widget\": \"customfile\"}\r\n                            }\r\n                            let fixedUi = {file, ...r}\r\n                            return {\r\n                                responses: tt.responses,\r\n                                json_schema: JSON.parse(tt.stage.json_schema),\r\n                                ui_schema: fixedUi\r\n                            }\r\n                        })\r\n                    }).flat()\r\n                })\r\n\r\n            setPrevTasks(inTasks)\r\n            setFormResponses(task.responses)\r\n            setSchema(parsed_schema)\r\n            setUiSchema(parsed_ui)\r\n            setComplete(task.complete)\r\n        }\r\n        if (id && currentUser) {\r\n            setData()\r\n        }\r\n    }, [id, currentUser])\r\n\r\n    const handleSubmit = () => {\r\n        setLoader(true)\r\n        let data = {responses: formResponses, complete: true}\r\n        axios.patch(tasksUrl + id + '/', data)\r\n            .then(() => setLoader(false))\r\n            .then(() => history.push(path))\r\n    }\r\n\r\n    const handleRelease = () => {\r\n        axios.post(tasksUrl + id + '/release_assignment/')\r\n            .then(() => alert(\"Released\"))\r\n            .then(() => history.push(path))\r\n    }\r\n\r\n    const handleChange = (e: any) => {\r\n        setFormResponses(e.formData)\r\n    }\r\n\r\n    return (\r\n        <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n            {editorData !== \"\" && <div style={{paddingBottom: 20}}>\r\n                <TextViewer data={editorData} />\r\n            </div>}\r\n\r\n            {prevTasks.length > 0 &&\r\n            <Grid>\r\n                <Typography variant={\"h4\"} align=\"center\" style={{padding: 10}}>Previous Tasks</Typography>\r\n                {prevTasks.map((task: any, i: number) =>\r\n                    <Form\r\n                        key={`prev_task_${i}`}\r\n                        schema={task.json_schema}\r\n                        uiSchema={task.ui_schema}\r\n                        formData={task.responses}\r\n                        widgets={widgets}\r\n                        disabled={true}\r\n                        children={\" \"}\r\n                    />\r\n                )}\r\n            </Grid>\r\n            }\r\n            <Grid>\r\n                {prevTasks.length > 0 &&\r\n                <Typography variant={\"h4\"} align=\"center\" style={{padding: 10}}>Current Task</Typography>}\r\n                <Form\r\n                    schema={schema}\r\n                    uiSchema={uiSchema}\r\n                    formData={formResponses}\r\n                    formContext={dataForStoragePath}\r\n                    widgets={widgets}\r\n                    disabled={complete}\r\n                    onChange={handleChange}\r\n                    onSubmit={handleSubmit}\r\n                >\r\n                    <Box display={\"flex\"}>\r\n                        <Button type=\"submit\" disabled={complete}>Submit</Button>\r\n                        {loader && <Box paddingLeft={2}><CircularProgress/></Box>}\r\n                    </Box>\r\n                    {/*<Button variant=\"danger\" disabled={complete} style={{marginLeft: 7}} onClick={handleRelease}>Release</Button>*/}\r\n                </Form>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Task\r\n","const projectName = \"GigaTurnip Tasks\"\r\n\r\n\r\nexport {projectName}","import axios from \"./Axios\";\r\nimport {campaignsUrl, taskstagesUrl, tasksUrl} from \"../config/Urls\";\r\n\r\nconst IS_PAGINATION_ON = false\r\n\r\n\r\n// Campaigns Functions\r\nexport const getCampaigns = () => {\r\n    return axios.get(campaignsUrl)\r\n        .then(res => res.data)\r\n        .then(res => {\r\n            console.log(res)\r\n            return IS_PAGINATION_ON ? res.results : res\r\n        })\r\n}\r\n\r\nexport const getUserCampaigns = () => {\r\n    return axios.get(campaignsUrl + 'list_user_campaigns/')\r\n        .then(res => res.data)\r\n        .then(res => {\r\n            console.log(\"user_campaigns\", res)\r\n            return IS_PAGINATION_ON ? res.results : res\r\n        })\r\n}\r\n\r\nexport const getSelectableCampaigns = () => {\r\n    return axios.get(campaignsUrl + 'list_user_selectable/')\r\n        .then(res => res.data)\r\n        .then(res => {\r\n            console.log(\"selectable_campaigns\", res)\r\n            return IS_PAGINATION_ON ? res.results : res\r\n        })\r\n}\r\n\r\nexport const requestCampaignJoin = (id: string | number) => {\r\n    return axios.post(campaignsUrl + id + '/join_campaign/')\r\n}\r\n\r\n\r\n// TaskCard Functions\r\nexport const requestTaskCreation = (id: string | number) => {\r\n    return axios.post(taskstagesUrl + id + '/create_task/')\r\n        .then(res => res.data)\r\n}\r\n\r\nexport const requestTaskAssignment = (id: string | number) => {\r\n    return axios.post(tasksUrl + id + '/request_assignment/')\r\n}\r\n\r\n\r\n// TaskMenu Functions\r\nexport const getSelectableTasks = (campaignId: string | number) => {\r\n    return axios.get(`${tasksUrl}user_selectable/?stage__chain__campaign=${campaignId}`)\r\n        .then(res => res.data)\r\n};\r\n\r\nexport const getCompleteTasks = (campaignId: string | number) => {\r\n    return axios.get(`${tasksUrl}user_relevant/?complete=${true}&stage__chain__campaign=${campaignId}`)\r\n        .then(res => res.data)\r\n};\r\n\r\nexport const getOpenTasks = (campaignId: string | number) => {\r\n    return axios.get(`${tasksUrl}user_relevant/?complete=${false}&stage__chain__campaign=${campaignId}`)\r\n        .then(res => res.data)\r\n};\r\n\r\nexport const getCreatableTasks = (campaignId: string | number) => {\r\n    return axios.get(`${taskstagesUrl}user_relevant/?chain__campaign=${campaignId}`)\r\n        .then(res => res.data)\r\n};","import React, {useContext, useState, useEffect} from 'react';\r\nimport clsx from 'clsx';\r\nimport {createStyles, makeStyles, Theme, useTheme} from '@material-ui/core/styles';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\n\r\nimport {\r\n    MenuItem,\r\n    Select,\r\n    FormControl,\r\n    InputLabel,\r\n    AppBar,\r\n    Button,\r\n    CssBaseline,\r\n    Drawer,\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    Toolbar,\r\n    Typography, Grid\r\n} from \"@material-ui/core\";\r\nimport {signInWithGoogle, signOut} from '../../util/Firebase';\r\nimport {AuthContext} from \"../../util/Auth\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport axios from '../../util/Axios';\r\n\r\nimport {campaignsUrl} from '../../config/Urls';\r\nimport {projectName} from \"../../config/Config\";\r\nimport {getCampaigns, getUserCampaigns} from \"../../util/Util\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n        },\r\n        appBar: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n        },\r\n        appBarShift: {\r\n            marginLeft: drawerWidth,\r\n            width: `calc(100% - ${drawerWidth}px)`,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        menuButton: {\r\n            marginRight: 36,\r\n        },\r\n        hide: {\r\n            display: 'none',\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n            whiteSpace: 'nowrap',\r\n        },\r\n        drawerOpen: {\r\n            width: drawerWidth,\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        drawerClose: {\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n            overflowX: 'hidden',\r\n            width: theme.spacing(7) + 1,\r\n            [theme.breakpoints.up('sm')]: {\r\n                width: theme.spacing(9) + 1,\r\n            },\r\n        },\r\n        toolbar: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end',\r\n            padding: theme.spacing(0, 1),\r\n            // necessary for content to be below app bar\r\n            ...theme.mixins.toolbar,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            // padding: theme.spacing(3),\r\n        },\r\n        title: {\r\n            flexGrow: 1\r\n        },\r\n        formControl: {\r\n            margin: theme.spacing(1),\r\n            alignItems: 'center'\r\n            // minWidth: 120,\r\n        },\r\n        selectEmpty: {\r\n            marginTop: theme.spacing(2),\r\n        },\r\n        select: {},\r\n        selectIcon: {\r\n            fill: 'white',\r\n            top: 'calc(50% - 14px)'\r\n        },\r\n    }),\r\n);\r\n\r\ntype AppbarProps = { children: React.ReactNode }\r\ntype CampaingParams = { id: number, name: string, description?: string };\r\n\r\nconst Appbar = (props: AppbarProps) => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const history = useHistory();\r\n    const {campaignId} = useParams<{ campaignId: string }>();\r\n    const {currentUser} = useContext(AuthContext)\r\n    const {children} = props;\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [campaign, setCampaign] = useState<number | string | unknown>(campaignId);\r\n    const [allCampaigns, setAllCampaigns] = useState<CampaingParams[]>([])\r\n\r\n    console.log(\"CURRENT CAMPAIGN\", campaignId)\r\n\r\n    useEffect(() => {\r\n        getUserCampaigns().then(res => setAllCampaigns(res))\r\n    }, [])\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleOptionClick = (page: string) => {\r\n        history.push(`/campaign/${campaignId}/${page}`)\r\n    };\r\n\r\n    const handleCampaignChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n        let value = event.target.value;\r\n        console.log(value)\r\n        setCampaign(value)\r\n        history.push(`/campaign/${value}/tasks`)\r\n    }\r\n\r\n    const redirectToMain = () => {\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline/>\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    {/*<IconButton*/}\r\n                    {/*    color=\"inherit\"*/}\r\n                    {/*    aria-label=\"open drawer\"*/}\r\n                    {/*    onClick={handleDrawerOpen}*/}\r\n                    {/*    edge=\"start\"*/}\r\n                    {/*    className={clsx(classes.menuButton, {*/}\r\n                    {/*        [classes.hide]: open,*/}\r\n                    {/*    })}*/}\r\n                    {/*>*/}\r\n                    {/*    <MenuIcon/>*/}\r\n                    {/*</IconButton>*/}\r\n                    <Typography variant=\"h6\" noWrap style={{cursor: \"pointer\"}} onClick={redirectToMain}>\r\n                        {projectName}\r\n                    </Typography>\r\n                    <Grid className={classes.title} />\r\n                    <Typography>{currentUser?.email}</Typography>\r\n                    <FormControl className={classes.formControl} size=\"small\">\r\n                        <Select\r\n                            className={classes.select}\r\n                            autoWidth\r\n                            labelId=\"campaign-select-label\"\r\n                            id=\"campaign-select-label\"\r\n                            value={campaign}\r\n                            onChange={handleCampaignChange}\r\n                            label=\"Campaign\"\r\n                            disableUnderline\r\n                            style={{color: 'white'}}\r\n                            inputProps={{\r\n                                classes: {\r\n                                    icon: classes.selectIcon,\r\n                                },\r\n                            }}\r\n                        >\r\n                            {allCampaigns.map(camp => <MenuItem key={`${camp.name}_${camp.id}`} value={camp.id}>{camp.name}</MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>\r\n                    {currentUser ?\r\n                        <Button onClick={signOut} color={\"inherit\"}>\r\n                            Выйти\r\n                        </Button>\r\n                        :\r\n                        <Button onClick={signInWithGoogle} color={\"inherit\"}>\r\n                            Войти\r\n                        </Button>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n            {/*<Drawer*/}\r\n            {/*    variant=\"permanent\"*/}\r\n            {/*    className={clsx(classes.drawer, {*/}\r\n            {/*        [classes.drawerOpen]: open,*/}\r\n            {/*        [classes.drawerClose]: !open,*/}\r\n            {/*    })}*/}\r\n            {/*    classes={{*/}\r\n            {/*        paper: clsx({*/}\r\n            {/*            [classes.drawerOpen]: open,*/}\r\n            {/*            [classes.drawerClose]: !open,*/}\r\n            {/*        }),*/}\r\n            {/*    }}*/}\r\n            {/*>*/}\r\n            {/*    <div className={classes.toolbar}>*/}\r\n            {/*        <IconButton onClick={handleDrawerClose}>*/}\r\n            {/*            {theme.direction === 'rtl' ? <ChevronRightIcon/> : <ChevronLeftIcon/>}*/}\r\n            {/*        </IconButton>*/}\r\n            {/*    </div>*/}\r\n            {/*    <Divider/>*/}\r\n            {/*    /!*<List>*!/*/}\r\n            {/*    /!*    <ListItem button onClick={() => handleOptionClick(\"chain\")}>*!/*/}\r\n            {/*    /!*        <ListItemIcon><InboxIcon/></ListItemIcon>*!/*/}\r\n            {/*    /!*        <ListItemText primary={\"Chains\"}/>*!/*/}\r\n            {/*    /!*    </ListItem>*!/*/}\r\n            {/*    /!*</List>*!/*/}\r\n            {/*</Drawer>*/}\r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar}/>\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Appbar\r\n","import React, {useContext} from 'react';\r\nimport clsx from 'clsx';\r\nimport {createStyles, makeStyles, Theme, useTheme} from '@material-ui/core/styles';\r\nimport {AppBar, Button, CssBaseline, Toolbar, Typography} from \"@material-ui/core\";\r\nimport {signInWithGoogle, signOut} from '../../util/Firebase';\r\nimport {AuthContext} from \"../../util/Auth\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport {projectName} from \"../../config/Config\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n        },\r\n        appBar: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n        },\r\n        appBarShift: {\r\n            marginLeft: drawerWidth,\r\n            width: `calc(100% - ${drawerWidth}px)`,\r\n            transition: theme.transitions.create(['width', 'margin'], {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        menuButton: {\r\n            marginRight: 36,\r\n        },\r\n        hide: {\r\n            display: 'none',\r\n        },\r\n        drawer: {\r\n            width: drawerWidth,\r\n            flexShrink: 0,\r\n            whiteSpace: 'nowrap',\r\n        },\r\n        drawerOpen: {\r\n            width: drawerWidth,\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.enteringScreen,\r\n            }),\r\n        },\r\n        drawerClose: {\r\n            transition: theme.transitions.create('width', {\r\n                easing: theme.transitions.easing.sharp,\r\n                duration: theme.transitions.duration.leavingScreen,\r\n            }),\r\n            overflowX: 'hidden',\r\n            width: theme.spacing(7) + 1,\r\n            [theme.breakpoints.up('sm')]: {\r\n                width: theme.spacing(9) + 1,\r\n            },\r\n        },\r\n        toolbar: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'flex-end',\r\n            padding: theme.spacing(0, 1),\r\n            // necessary for content to be below app bar\r\n            ...theme.mixins.toolbar,\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            // padding: theme.spacing(3),\r\n        },\r\n        title: {\r\n            flexGrow: 1\r\n        }\r\n    }),\r\n);\r\n\r\ntype AppbarProps = { children: React.ReactNode }\r\n\r\nconst Appbar = (props: AppbarProps) => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const [open, setOpen] = React.useState(false);\r\n    const {children} = props;\r\n    const {currentUser} = useContext(AuthContext)\r\n    const history = useHistory();\r\n\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <CssBaseline/>\r\n            <AppBar\r\n                position=\"fixed\"\r\n                className={clsx(classes.appBar, {\r\n                    [classes.appBarShift]: open,\r\n                })}\r\n            >\r\n                <Toolbar>\r\n                    <Typography className={classes.title} variant=\"h6\" noWrap>\r\n                        {projectName}\r\n                    </Typography>\r\n                    <Typography>{currentUser?.email}</Typography>\r\n                    {currentUser ?\r\n                        <Button onClick={signOut} color={\"inherit\"}>\r\n                            Выйти\r\n                        </Button>\r\n                        :\r\n                        <Button onClick={signInWithGoogle} color={\"inherit\"}>\r\n                            Войти\r\n                        </Button>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar}/>\r\n                {children}\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Appbar\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {CardParams} from \"../../util/Types\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: 300,\r\n        // height: 200\r\n    },\r\n    extra: {\r\n        marginBottom: 15\r\n    }\r\n});\r\n\r\nconst ParentCard = (props: CardParams) => {\r\n    const classes = useStyles();\r\n    const {id, name, description, campaign} = props.data;\r\n    const {onCardButtonClick, openCampaignInfo, selectable} = props;\r\n\r\n    const handleOpen = () => {\r\n        onCardButtonClick(id)\r\n    }\r\n\r\n    const redirectToInfoPage = () => {\r\n        if (openCampaignInfo) {\r\n            openCampaignInfo(id)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <Typography variant=\"h5\" component=\"h2\" gutterBottom={true}>\r\n                    {name}\r\n                </Typography>\r\n                <Typography className={classes.extra} variant=\"subtitle2\" color=\"textSecondary\">\r\n                    ID: {id} {campaign && `Campaign: ${campaign}`}\r\n                </Typography>\r\n                <Typography variant=\"body1\" component=\"p\">\r\n                    {description ? description : <br/>}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions>\r\n                {selectable ?\r\n                    <Button size=\"small\" onClick={redirectToInfoPage}>Подробнее</Button>\r\n                    :\r\n                    <Button size=\"small\" onClick={handleOpen}>Открыть</Button>\r\n                }\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ParentCard","import React, {useEffect, useState} from \"react\";\r\nimport {Grid, Typography} from \"@material-ui/core\";\r\nimport Card from \"./CampaignCard\";\r\nimport {CampaignParams} from \"../../util/Types\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {getSelectableCampaigns, getUserCampaigns} from \"../../util/Util\";\r\n\r\n\r\nconst Builder = () => {\r\n    const [userCampaigns, setUserCampaigns] = useState<CampaignParams[]>([])\r\n    const [selectableCampaigns, setSelectableCampaigns] = useState<CampaignParams[]>([])\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        getUserCampaigns().then(res => setUserCampaigns(res))\r\n        getSelectableCampaigns().then(res => setSelectableCampaigns(res))\r\n\r\n    }, [])\r\n\r\n    const openCampaignInfo = (id: string | number) => {\r\n        history.push(`/campaign/about/${id}`)\r\n    }\r\n\r\n    const handleCardRedirect = (id: string | number) => {\r\n        history.push(`/campaign/${id}/tasks`)\r\n    }\r\n\r\n    return (\r\n        <Grid>\r\n            <Grid>\r\n                <Typography align={\"center\"} variant={\"h4\"}>Мои кампании</Typography>\r\n                <Grid container justifyContent={\"center\"}>\r\n                    {userCampaigns.map(campaign => (\r\n                        <Grid item key={campaign.id} style={{padding: 10}}>\r\n                            <Card data={campaign}\r\n                                  onCardButtonClick={handleCardRedirect}\r\n                                  openCampaignInfo={openCampaignInfo}\r\n                                  selectable={false}\r\n                            />\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Grid>\r\n                <Typography align={\"center\"} variant={\"h4\"}>Доступные кампании</Typography>\r\n                <Grid container justifyContent={\"center\"}>\r\n                    {selectableCampaigns.map(campaign => (\r\n                        <Grid item key={campaign.id} style={{padding: 10}}>\r\n                            <Card data={campaign}\r\n                                  onCardButtonClick={handleCardRedirect}\r\n                                  openCampaignInfo={openCampaignInfo}\r\n                                  selectable={true}\r\n                            />\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Builder\r\n\r\n\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\ninterface TabPanelProps {\r\n    children?: React.ReactNode;\r\n    index: any;\r\n    value: any;\r\n}\r\n\r\nconst TabPanel = (props: TabPanelProps) => {\r\n    const {children, value, index, ...other} = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box p={3}>\r\n                    <Typography>{children}</Typography>\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TabPanel","import React from 'react';\r\nimport {makeStyles, Theme} from '@material-ui/core/styles';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport {Grid} from \"@material-ui/core\";\r\n\r\nfunction a11yProps(index: any) {\r\n    return {\r\n        id: `simple-tab-${index}`,\r\n        'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n}));\r\n\r\ntype SimpleTabsProps = {\r\n    value: number | string,\r\n    handleChange: (event: any, newValue: number) => void,\r\n    showSelectable: boolean,\r\n    children: any\r\n}\r\n\r\nconst SimpleTabs = (props: SimpleTabsProps) => {\r\n    const classes = useStyles();\r\n    const {value, handleChange} = props;\r\n\r\n    return (\r\n        <Grid>\r\n            <div className={classes.root}>\r\n                <Tabs value={value} onChange={handleChange} variant=\"fullWidth\" centered\r\n                      aria-label=\"simple tabs example\">\r\n                    <Tab label=\"Невыполненные\" {...a11yProps(0)} />\r\n                    <Tab label=\"Выполненные\" {...a11yProps(1)} />\r\n                    {props.showSelectable && <Tab label=\"Доступные\" {...a11yProps(2)} />}\r\n                </Tabs>\r\n            </div>\r\n            {props.children}\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default SimpleTabs\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {requestTaskAssignment, requestTaskCreation} from \"../../util/Util\";\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: 300,\r\n        // height: 200\r\n    },\r\n    extra: {\r\n        marginBottom: 15\r\n    }\r\n});\r\n\r\ntype CardProps = {\r\n    id: number,\r\n    complete?: boolean,\r\n    name: string,\r\n    description?: string,\r\n    creatable?: boolean,\r\n    selectable?: boolean\r\n}\r\n\r\nconst TaskCard = (props: CardProps) => {\r\n    const classes = useStyles();\r\n    const {id, complete, name, description, creatable, selectable} = props;\r\n    const history = useHistory()\r\n\r\n    const handleOpen = () => {\r\n        history.push(`${history.location.pathname}/${id}`)\r\n    }\r\n\r\n    const handleCreate = () => {\r\n        requestTaskCreation(id)\r\n            .then(res => history.push(`${history.location.pathname}/${res.id}`))\r\n            .catch(err => alert(err))\r\n    };\r\n\r\n    const handleSelectable = () => {\r\n        requestTaskAssignment(id)\r\n            .then(res => history.push(`${history.location.pathname}/${id}`))\r\n            .catch(err => alert(err))\r\n    }\r\n\r\n    const returnButton = () => {\r\n        if (selectable) {\r\n            return <Button size=\"small\" onClick={handleSelectable}>Открыть</Button>\r\n        } else if (creatable) {\r\n            return <Button size=\"small\" onClick={handleCreate}>Создать</Button>\r\n        } else {\r\n            return <Button size=\"small\" onClick={handleOpen}>Открыть</Button>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <Typography variant=\"h5\" component=\"span\" gutterBottom={true}>\r\n                    {name}\r\n                </Typography>\r\n                <br/>\r\n                <Typography variant=\"subtitle2\" component=\"span\">\r\n                    {id && !creatable ? `ID: ${id}` : <br/>}\r\n                </Typography>\r\n                <br/>\r\n                <Typography variant=\"body1\" component=\"span\">\r\n                    {description ? description : <br/>}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions>\r\n                {returnButton()}\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default TaskCard","import React from \"react\";\r\nimport {Grid} from \"@material-ui/core\";\r\nimport TaskCard from \"./TaskCard\";\r\n\r\n\r\ntype TaskListProps = {\r\n    complete?: boolean,\r\n    selectable?: boolean,\r\n    creatable?: boolean,\r\n    tasks: any[]\r\n}\r\n\r\nconst TaskList = (props: TaskListProps) => {\r\n    const {complete, selectable, tasks, creatable} = props;\r\n\r\n    const listTasks = () => {\r\n        return tasks.map((task: any) => {\r\n                let id, name, description;\r\n                if (creatable) {\r\n                    id = task.id\r\n                    name = task.name\r\n                    description = task.description\r\n                }\r\n                else {\r\n                    id = task.id\r\n                    name = task.stage.name\r\n                    description = task.stage.description\r\n                }\r\n\r\n                return (\r\n                    <Grid item key={task.id} style={{padding: 10}}>\r\n                        <TaskCard\r\n                            id={id}\r\n                            name={name}\r\n                            description={description}\r\n                            complete={complete}\r\n                            selectable={selectable}\r\n                            creatable={creatable}\r\n                        />\r\n                    </Grid>\r\n                )\r\n            }\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Grid\r\n            container\r\n            direction={creatable ? \"row\" : \"column\"}\r\n            alignItems={\"center\"}\r\n            justifyContent={creatable ? \"flex-start\" : \"center\"}\r\n        >\r\n            {listTasks()}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default TaskList","import React, {useContext, useEffect, useState} from \"react\";\r\nimport TabPanel from \"../Tabs/TabPanel\";\r\nimport SimpleTabs from \"../Tabs/Tabs\";\r\nimport TaskList from \"./TaskList\";\r\nimport {AuthContext} from \"../../util/Auth\";\r\nimport {Grid} from \"@material-ui/core\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport {getCompleteTasks, getCreatableTasks, getOpenTasks, getSelectableTasks} from \"../../util/Util\";\r\n\r\n\r\ntype RouterParams = { campaignId: string }\r\n\r\nconst TaskMenu = (props: any) => {\r\n    const {campaignId} = useParams<RouterParams>();\r\n    const {currentUser} = useContext(AuthContext)\r\n\r\n    const [value, setValue] = useState(0);\r\n    const [selectableTasks, setSelectableTasks] = useState([])\r\n    const [completeTasks, setCompleteTasks] = useState([])\r\n    const [openTasks, setOpenTasks] = useState([])\r\n    const [creatableTasks, setCreatableTasks] = useState([])\r\n\r\n    const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    useEffect(() => {\r\n        getSelectableTasks(campaignId).then(res => setSelectableTasks(res))\r\n        getCompleteTasks(campaignId).then(res => setCompleteTasks(res))\r\n        getOpenTasks(campaignId).then(res => setOpenTasks(res))\r\n        getCreatableTasks(campaignId).then(res => setCreatableTasks(res))\r\n    }, [campaignId])\r\n\r\n    return (\r\n        currentUser && currentUser.uid &&\r\n        <Grid>\r\n            <TaskList creatable={true} tasks={creatableTasks}/>\r\n            <SimpleTabs value={value} handleChange={handleChange} showSelectable={selectableTasks.length > 0}>\r\n                <TabPanel value={value} index={0}>\r\n                    <TaskList complete={false} tasks={openTasks}/>\r\n                </TabPanel>\r\n                <TabPanel value={value} index={1}>\r\n                    <TaskList complete={true} tasks={completeTasks}/>\r\n                </TabPanel>\r\n                {selectableTasks.length > 0 &&\r\n                <TabPanel value={value} index={2}>\r\n                    <TaskList selectable={true} tasks={selectableTasks}/>\r\n                </TabPanel>}\r\n            </SimpleTabs>\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default TaskMenu","import React, {useEffect, useState} from \"react\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport axios from \"../../util/Axios\";\r\nimport {campaignsUrl} from \"../../config/Urls\";\r\nimport TextViewer from \"../text-editor/TextViewer\";\r\nimport {Button, Grid, Typography} from \"@material-ui/core\";\r\nimport {requestCampaignJoin} from \"../../util/Util\";\r\n\r\n\r\nconst About = () => {\r\n    const {id}: { id: string } = useParams();\r\n    const history = useHistory();\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n    const [richText, setRichText] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        console.log(campaignsUrl, id)\r\n        axios.get(campaignsUrl + id + '/')\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                const {richText, name, description} = res;\r\n                if (name) {\r\n                    setName(name)\r\n                }\r\n                if (description) {\r\n                    setDescription(description)\r\n                }\r\n                if (richText) {\r\n                    setRichText(richText)\r\n                }\r\n            })\r\n    }, [id])\r\n\r\n    const joinCampaign = () => {\r\n        requestCampaignJoin(id).then(() => history.push(`/campaign/${id}/tasks`))\r\n    }\r\n\r\n    return (\r\n        <div style={{width: '70%', minWidth: '400px', margin: '0 auto', display: 'block', padding: 10}}>\r\n            <Typography variant={\"h3\"} align={\"center\"}>{name}</Typography>\r\n            <Typography variant={\"h6\"} align={\"center\"}>{description}</Typography>\r\n            {richText && <TextViewer data={richText}/>}\r\n            <Grid container justifyContent={\"center\"} style={{padding: 20}}>\r\n                <Button variant={\"contained\"} color={\"primary\"} onClick={joinCampaign}>Присоединиться / Кошулуу</Button>\r\n            </Grid>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default About","import React from \"react\";\r\nimport Task from './components/tasks/Task'\r\nimport Appbar from \"./components/appbar/Appbar\";\r\n\r\nimport {HashRouter as Router, Route, Switch} from \"react-router-dom\";\r\nimport SimpleAppbar from \"./components/appbar/SimpleAppbar\";\r\nimport Campaigns from \"./components/campaigns/Campaigns\";\r\nimport TaskMenu from \"./components/tasks/TaskMenu\";\r\nimport About from \"./components/campaigns/About\";\r\n\r\nconst App = () => {\r\n    return (\r\n        <div>\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path={\"/campaign/about/:id\"}>\r\n                        <About/>\r\n                    </Route>\r\n                    <Route path={\"/campaign/:campaignId\"}>\r\n                        <Appbar>\r\n                            <Route exact path=\"/campaign/:campaignId/tasks\">\r\n                                <TaskMenu/>\r\n                            </Route>\r\n                            <Route exact path=\"/campaign/:campaignId/tasks/:id\">\r\n                                <Task/>\r\n                            </Route>\r\n                        </Appbar>\r\n                    </Route>\r\n                    <Route path=\"/\">\r\n                        <SimpleAppbar>\r\n                            <Campaigns/>\r\n                        </SimpleAppbar>\r\n                    </Route>\r\n                </Switch>\r\n            </Router>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {AuthProvider} from \"./util/Auth\";\r\n\r\nReactDOM.render(\r\n    // <React.StrictMode>\r\n    <AuthProvider>\r\n        <App/>\r\n    </AuthProvider>,\r\n    // </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}