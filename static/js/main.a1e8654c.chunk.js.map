{"version":3,"sources":["services/firebase/Firebase.js","context/authentication/AuthProvider.tsx","context/toast/ToastProvider.tsx","context/authentication/hooks/useAuth.tsx","pages/login/RequireAuth.tsx","components/layout/appbar/Appbar.tsx","components/layout/Layout.tsx","pages/login/Login.tsx","components/card/Card.tsx","components/card/ExpandableCard.tsx","components/list/ListContent.tsx","components/list/ListHeader.tsx","components/list/List.tsx","services/api/Urls.js","context/toast/hooks/useToast.tsx","services/api/useAxios.tsx","utils/hooks/UseHelpers.ts","components/form/custom-widgets/audio-widget/AudioWidget.tsx","components/form/custom-widgets/auto-complete-widget/AutoCompleteWidget.tsx","components/form/custom-widgets/file-widget/Upload.js","components/progress/LinearProgressWithLabel.tsx","components/form/custom-widgets/file-widget/CustomFileWidget.tsx","components/form/custom-widgets/link-widget/CustomLinkWidget.tsx","components/form/custom-widgets/radio-widget/FixedRadioWidget.tsx","components/form/custom-widgets/date-time-widget/CustomDateTimeWidget.tsx","components/form/custom-widgets/date-widget/CustomDateWidget.tsx","components/form/custom-widgets/select-widget/FixedSelectWidget.tsx","components/form/custom-widgets/counter-widget/Counter.tsx","components/form/Form.tsx","pages/tasks/task/common-task/CommonView.tsx","pages/tasks/task/quick-task/QuickView.tsx","pages/tasks/task/quick-task/Quick.tsx","components/layout/common-layouts/BuilderLayout.tsx","pages/tasks/task/common-task/Common.tsx","pages/tasks/task/integrated-task/Integrated.tsx","components/prompt/Prompt.tsx","components/text-editor/TextViewer.tsx","pages/tasks/task/Task.tsx","pages/tasks/TaskFilter.tsx","pages/notifications/Notifications.tsx","components/card/TaskCard.tsx","pages/tasks/Tasks.tsx","pages/campaigns/Campaigns.tsx","pages/campaigns/about/About.tsx","pages/notifications/NotificationContent.tsx","App.tsx","reportWebVitals.ts","services/localization/i18n.js","index.tsx"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAuth","storage","getStorage","provider","GoogleAuthProvider","setCustomParameters","prompt","AuthContext","React","createContext","AuthProvider","children","useState","user","setUser","ready","setReady","i18n","useTranslation","useEffect","onIdTokenChanged","a","lang","localStorage","getItem","changeLanguage","value","getToken","getIdToken","login","callback","signInWithPopup","then","result","console","log","logout","signOut","Provider","ToastContext","Alert","forwardRef","props","ref","elevation","variant","ToastProvider","open","setOpen","title","setTitle","setVariant","closeToast","event","reason","openToast","JSON","stringify","String","Snackbar","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","sx","width","useAuth","useContext","RequireAuth","location","useLocation","to","state","from","CircularProgress","drawerWidth","openedMixin","theme","transition","transitions","create","easing","sharp","duration","enteringScreen","overflowX","closedMixin","leavingScreen","spacing","breakpoints","down","DrawerHeader","styled","display","alignItems","justifyContent","padding","mixins","toolbar","StyledAppBar","MuiAppBar","shouldForwardProp","prop","zIndex","drawer","marginLeft","Drawer","MuiDrawer","flexShrink","whiteSpace","boxSizing","Appbar","useTheme","campaignId","useParams","navigate","useNavigate","t","DrawerItems","page","icon","Box","CssBaseline","position","Toolbar","IconButton","color","onClick","edge","marginRight","flexGrow","component","Link","underline","noWrap","boxShadow","Typography","email","Button","language","setItem","direction","Divider","map","item","index","ListItem","ListItemIcon","ListItemText","primary","Layout","Login","pathname","p","align","size","fullWidth","replace","Card","data","name","description","id","reopened","CardContent","pb","gutterBottom","overflow","textOverflow","height","maxWidth","CardActions","hidden","ExpandMore","expand","other","transform","shortest","ExpandableCard","hideExpandButton","hideOpenButton","extraActions","setExpand","actions","push","CardHeader","action","Stack","subheader","titleTypographyProps","subheaderTypographyProps","Collapse","in","timeout","unmountOnExit","ListContent","view","onSelect","Grid","container","py","xs","md","columns","sm","ListHeader","label","hideCreateButton","hideViewButton","onViewChange","flex","Tooltip","List","defaultView","setView","campaignsUrl","chainsUrl","taskstagesUrl","conditionalstagesUrl","tasksUrl","notificationsUrl","useToast","useAxios","axios","defaultAxios","baseURL","interceptors","request","use","config","token","headers","error","Promise","reject","createPaginationURL","getCampaigns","get","res","results","getChains","catch","err","message","createChain","post","getStageNodes","chainId","getLogicNodes","getTaskStage","saveTaskStage","patch","getTaskStageOptions","options","getConditionalStage","saveConditionalStage","getUserCampaigns","getSelectableCampaigns","requestCampaignJoin","requestCampaignInfo","requestTaskCreation","requestTaskAssignment","getCompleteTasks","getOpenTasks","getCreatableTasks","getSelectableTasks","filter","url","getPreviousTasks","getTask","saveTask","releaseTask","openPreviousTask","getIntegratedData","triggerTaskWebhook","getUserNotifications","viewed","importance","getNotificationContent","getTaskFields","getDynamicSchema","formData","useHelpers","parseJson","text","parse","addZeroesToDate","date","parseId","parseInt","Error","parseTaskData","responses","schema","stage","json_schema","uiSchema","ui_schema","formatDateString","d","Date","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","AudioWidget","required","disabled","readonly","formContext","onChange","onBlur","record","setRecord","loader","setLoader","storagePath","privateUpload","private","defaultRecord","default","privatePath","storageRef","getDownloadURL","Indicator","div","keyframes","handleStopRecording","blobUrl","blob","ext","type","split","filename","fileRef","uploadBytes","snapshot","fullPath","path","useReactMediaRecorder","video","onStop","status","startRecording","stopRecording","className","marginBottom","endIcon","fill","renderButton","controls","src","TextWidget","placeholder","onFocus","autofocus","rawErrors","inputType","Group","Label","length","Control","autoFocus","readOnly","list","examples","undefined","target","emptyValue","concat","example","returnNewState","prevState","update","multiple","upload","files","setFileBeingUploaded","setFileLinks","all","file","period","lastIndexOf","substring","uploadTask","uploadBytesResumable","progress","on","bytesTransferred","totalBytes","downloadURL","filePath","fileLink","LinearProgressWithLabel","mr","LinearProgress","minWidth","Math","round","CustomFileWidget","uploadedFiles","setUploadedFiles","fileLinks","currentFile","setCurrentFile","isImageOpen","setIsImageOpen","isVideoOpen","setIsVideoOpen","fileType","setFileType","parsedValue","setParsedValue","multipleSelect","hasUploadedFiles","Object","keys","isInputRequired","parsed","forEach","handleChange","_onBlur","updateFormResponses","allFiles","deleteFile","links","uploaded","handleFileClick","getMetadata","metadata","contentType","window","closeViewer","disableScroll","backgroundStyle","backgroundColor","closeOnClickOutside","Dialog","i","style","fontSize","margin","CustomLinkWidget","href","RadioWidget","enumOptions","enumDisabled","_onChange","_onFocus","inline","Boolean","option","itemDisabled","Array","isArray","indexOf","checked","Check","DateTimeWidget","localeMap","en","enLocale","ru","ruLocale","LocalizationProvider","dateAdapter","AdapterDateFns","locale","DateTimePicker","inputFormat","mask","toJSON","ignoreInvalidInputs","renderInput","params","TextField","hiddenLabel","DateWidget","DatePicker","slice","nums","Set","processValue","items","has","asNumber","enum","every","x","guessType","getValue","call","o","selected","SelectWidget","newValue","Counter","_value","toISOString","pop","pr","Form","hideButton","onSubmit","rest","widgets","customfile","FileWidget","autocomplete","AutoCompleteWidget","customlink","LinkWidget","audio","fields","counter","CounterWidget","e","CommonView","complete","previousTasks","hideSubmit","onRelease","onPrevious","taskId","stageId","allow_go_back","allow_release","chain","campaign","inactive","uid","renderPreviousTasks","tasks","task","form","omitExtraData","liveOmit","Chip","QuickView","active","onRequest","onOpen","onAction","hideOpen","cardData","requestButton","Quick","isActive","fullwidth","getData","getPreviousData","saveData","debouncedSave","handleRedirect","handlePrompt","requestTask","updateState","setData","setFormData","setComplete","setPreviousTasks","setActive","mountData","useCallback","prev","formProps","prevId","BuilderLayout","Common","getDynamicForm","forceUpdate","isDynamic","setDynamic","setDynamicForm","_jsonData","dynamicSchema","hasOwnProperty","next_direct_id","Integrated","getIntegrated","triggerWebhook","integrations","setIntegrations","setUpdate","handleActivate","newSet","copy","splice","includes","pt","useBlocker","blocker","when","NavigationContext","navigator","unblock","block","tx","autoUnblockingTx","retry","setTimeout","TextViewer","tinymceScriptSrc","process","init","plugins","menubar","image_advtab","importcss_append","Task","updateData","hidePrompt","parsedId","showPrompt","setShowPrompt","response","confirm","usePrompt","releaseUserTask","openPrevious","debounce","scrollTo","taskMethods","integrator_group","mb","rich_text","OPERATORS","TYPES","TaskFilter","onFilter","setChainId","searchStageId","setSearchStageId","formStageId","setFormStageId","chains","setChains","stages","setStages","jsonSchema","setJsonSchema","setUiSchema","formResponses","setFormResponses","savedChain","savedFormStage","parsedStageId","savedResponses","_schema","properties","field","enumNames","returnObjects","conditions","operator","createSchema","FormGroup","FormControl","m","InputLabel","Select","labelId","MenuItem","parsedFormStageId","parsedSearchStageId","query","all_conditions","search_stage","queryString","mx","Notifications","onlyNew","viewedNotifications","setViewedNotifications","notViewedNotifications","setNotViewedNotifications","totalPages","setTotalPages","setPage","tab","setTab","matches","useMediaQuery","parsedCampaignId","ceil","count","openMessage","background","cursor","created_at","typography","TabContext","borderBottom","borderColor","TabList","centered","Tab","TabPanel","Pagination","showFirstButton","showLastButton","TaskCard","Tasks","openTasks","setOpenTasks","completedTasks","setCompletedTasks","creatableTasks","setCreatableTasks","selectableTasks","setSelectableTasks","filterFormData","setFilterFormData","handleOpen","getSelectable","px","alert","Campaigns","selectableCampaigns","setSelectableCampaigns","About","setName","setDescription","richText","setRichText","NotificationContent","App","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","i18next","initReactI18next","resources","translation","date_time_label","date_label","returned","edit","accepted","choose_files","view_file","remove_file","notifications","unread","read","submit","appbar","log_out","leave_page","returned_message","open_previous","release","saved_message","divider_text","sign_up_page","description1","description2","sign_up_button","campaigns","user_campaigns","selectable_campaigns","join","details","list_header","grid","completed","uncompleted","available","chain_label","search_stage_label","stage_label","filter_label","field_label","type_label","types","conditions_label","value_label","value_description","operator_label","operators","search_button","lng","supportedLngs","interpolation","escapeValue","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a1e8654c.chunk.js","sourcesContent":["import {initializeApp} from 'firebase/app';\r\nimport {getAuth, GoogleAuthProvider} from \"firebase/auth\";\r\nimport {getStorage, ref, getDownloadURL} from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCXiwOUNsbzKH7sbSAZrqA9f7VOeCMdUOQ\",\r\n    authDomain: \"gigaturnip-b6b5b.firebaseapp.com\",\r\n    projectId: \"gigaturnip-b6b5b\",\r\n    storageBucket: \"gigaturnip-b6b5b.appspot.com\",\r\n    messagingSenderId: \"414429242328\",\r\n    appId: \"1:414429242328:web:a4685f5ac6895ea767c8ad\",\r\n    measurementId: \"G-Y8JTEJMTET\"\r\n};\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth();\r\nconst storage = getStorage(app);\r\n\r\nconst provider = new GoogleAuthProvider();\r\nprovider.setCustomParameters({\r\n    prompt: 'select_account'\r\n});\r\n\r\nexport {app, auth, provider, storage};","import React, {useEffect, useState} from \"react\";\r\nimport {auth, provider} from \"../../services/firebase/Firebase\";\r\nimport {signInWithPopup, getIdToken, signOut, onIdTokenChanged} from \"firebase/auth\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ninterface AuthContextType {\r\n    user: any;\r\n    ready: boolean;\r\n    getToken: () => Promise<string>;\r\n    login: (callback: VoidFunction) => void;\r\n    logout: (callback: VoidFunction) => void;\r\n}\r\n\r\nexport const AuthContext = React.createContext<AuthContextType>(null!);\r\n\r\nconst AuthProvider = ({children}: { children: React.ReactNode }) => {\r\n    const [user, setUser] = useState<any>(null);\r\n    const [ready, setReady] = useState(false);\r\n    const {i18n} = useTranslation();\r\n\r\n    useEffect(() => {\r\n        onIdTokenChanged(auth, async (user) => {\r\n            if (user) {\r\n                setUser(user)\r\n            } else {\r\n                setUser(null)\r\n            }\r\n            setReady(true)\r\n        });\r\n\r\n        const lang = localStorage.getItem('lang');\r\n        if (lang) {\r\n            i18n.changeLanguage(lang);\r\n        }\r\n    }, [])\r\n\r\n    const getToken = async () => {\r\n        return await getIdToken(user);\r\n    }\r\n\r\n    const login = (callback: VoidFunction) => {\r\n        return signInWithPopup(auth, provider).then((result) => {\r\n            const user = result.user;\r\n            console.log(user)\r\n            setUser(user);\r\n            callback();\r\n        });\r\n    };\r\n\r\n    const logout = (callback: VoidFunction) => {\r\n        return signOut(auth).then(() => {\r\n            setUser(null);\r\n            callback();\r\n        });\r\n    };\r\n\r\n    const value = {user, ready, getToken, login, logout};\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport default AuthProvider","import React, {useEffect, useState} from \"react\";\r\nimport {Alert as MuiAlert, AlertProps, Snackbar} from \"@mui/material\";\r\n\r\ninterface ToastContextType {\r\n    open: boolean;\r\n    openToast: (title: string, variant?: ToastVariants) => void;\r\n    closeToast: (event?: React.SyntheticEvent | Event, reason?: string) => void;\r\n}\r\n\r\nexport type ToastVariants = \"success\" | \"error\" | \"warning\" | \"info\";\r\n\r\nexport const ToastContext = React.createContext<ToastContextType>(null!);\r\n\r\nconst Alert = React.forwardRef<HTMLDivElement, AlertProps>(function Alert(\r\n    props,\r\n    ref,\r\n) {\r\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\r\n});\r\n\r\nconst ToastProvider = ({children}: { children: React.ReactNode }) => {\r\n    const [open, setOpen] = useState(false);\r\n    const [title, setTitle] = useState<any>(\"\");\r\n    const [variant, setVariant] = useState<ToastVariants>(\"error\")\r\n\r\n    const stringify = (value: any) => {\r\n        switch (typeof value) {\r\n            case 'string':\r\n                return value;\r\n            case 'object':\r\n                return JSON.stringify(value);\r\n            default:\r\n                return String(value);\r\n        }\r\n    };\r\n\r\n    const openToast = (title: string, variant?: ToastVariants) => {\r\n        if (variant) {\r\n            setVariant(variant)\r\n        }\r\n        setTitle(stringify(title))\r\n        setOpen(true);\r\n    };\r\n\r\n    const closeToast = (event?: React.SyntheticEvent | Event, reason?: string) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n\r\n        setOpen(false);\r\n    };\r\n\r\n    const value = {open, openToast, closeToast};\r\n\r\n    return <ToastContext.Provider value={value}>\r\n        <Snackbar open={open} autoHideDuration={5000} onClose={closeToast}\r\n                  anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'center',\r\n                  }}\r\n        >\r\n            <Alert onClose={closeToast} severity={variant} sx={{width: '100%'}}>\r\n                {title}\r\n            </Alert>\r\n        </Snackbar>\r\n        {children}\r\n    </ToastContext.Provider>;\r\n};\r\n\r\nexport default ToastProvider","import React from \"react\";\r\nimport {AuthContext} from \"../AuthProvider\";\r\n\r\nexport const useAuth = () => React.useContext(AuthContext);","import {useAuth} from \"../../context/authentication/hooks/useAuth\";\r\nimport {Navigate, useLocation} from \"react-router-dom\";\r\nimport {CircularProgress} from \"@mui/material\";\r\n\r\nconst RequireAuth = ({ children }: { children: JSX.Element }) => {\r\n  const auth = useAuth();\r\n  const location = useLocation();\r\n\r\n  console.log(auth)\r\n\r\n  if (auth.ready && !auth.user) {\r\n    return <Navigate to={\"login\"} state={{ from: location }} />;\r\n  }\r\n\r\n  return auth.ready ? children : <CircularProgress/>;\r\n};\r\n\r\nexport default RequireAuth","import React from 'react';\r\nimport {CSSObject, styled, Theme, useTheme} from '@mui/material/styles';\r\nimport Box from '@mui/material/Box';\r\nimport MuiDrawer from '@mui/material/Drawer';\r\nimport MuiLink from '@mui/material/Link';\r\nimport MuiAppBar, {AppBarProps as MuiAppBarProps} from '@mui/material/AppBar';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport List from '@mui/material/List';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport Divider from '@mui/material/Divider';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\r\nimport ChevronRightIcon from '@mui/icons-material/ChevronRight';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport AssignmentIcon from '@mui/icons-material/Assignment';\r\nimport NotificationsIcon from '@mui/icons-material/Notifications';\r\nimport {Link, useNavigate, useParams} from \"react-router-dom\";\r\nimport {Button, Typography} from \"@mui/material\";\r\nimport {useAuth} from \"../../../context/authentication/hooks/useAuth\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst openedMixin = (theme: Theme): CSSObject => ({\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n});\r\n\r\nconst closedMixin = (theme: Theme): CSSObject => ({\r\n    transition: theme.transitions.create('width', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n    width: `calc(${theme.spacing(7)} + 1px)`,\r\n    [theme.breakpoints.down('sm')]: {\r\n        width: 0,\r\n    }\r\n});\r\n\r\n// @ts-ignore\r\nconst DrawerHeader = styled('div')(({theme}) => ({\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n}));\r\n\r\ninterface AppBarProps extends MuiAppBarProps {\r\n    open?: boolean;\r\n}\r\n\r\nconst StyledAppBar = styled(MuiAppBar, {\r\n    shouldForwardProp: (prop) => prop !== 'open',\r\n})<AppBarProps>(({theme, open}) => ({\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    ...(open && {\r\n        marginLeft: drawerWidth,\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        transition: theme.transitions.create(['width', 'margin'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    }),\r\n}));\r\n\r\nconst Drawer = styled(MuiDrawer, {shouldForwardProp: (prop) => prop !== 'open'})(\r\n    ({theme, open}) => ({\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n        whiteSpace: 'nowrap',\r\n        boxSizing: 'border-box',\r\n        ...(open && {\r\n            ...openedMixin(theme),\r\n            '& .MuiDrawer-paper': openedMixin(theme),\r\n        }),\r\n        ...(!open && {\r\n            ...closedMixin(theme),\r\n            '& .MuiDrawer-paper': closedMixin(theme),\r\n        }),\r\n    }),\r\n);\r\n\r\nexport default function Appbar(props: { children?: any }) {\r\n    const theme = useTheme();\r\n    const {campaignId} = useParams();\r\n    const navigate = useNavigate();\r\n    const {user, logout} = useAuth();\r\n    const [open, setOpen] = React.useState(false);\r\n    const { t, i18n } = useTranslation();\r\n\r\n    const {children} = props;\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const DrawerItems = [\r\n        {page: \"tasks\", title: t(\"appbar.tasks\"), icon: <AssignmentIcon/>},\r\n        {page: \"notifications\", title: t(\"appbar.notifications\"), icon: <NotificationsIcon/>}\r\n    ]\r\n\r\n    const renderDrawerItems = () => {\r\n        return DrawerItems.map((item, index) => (\r\n            <ListItem key={index} component={Link} to={`campaign/${campaignId}/${item.page}`}>\r\n                <ListItemIcon>\r\n                    {item.icon}\r\n                </ListItemIcon>\r\n                <ListItemText primary={item.title}/>\r\n            </ListItem>\r\n        ));\r\n    };\r\n\r\n    const handleLanguageChange = () => {\r\n        if (i18n.language === \"ru\") {\r\n            i18n.changeLanguage(\"en\");\r\n            localStorage.setItem('lang', \"en\");\r\n        } else {\r\n            i18n.changeLanguage(\"ru\");\r\n            localStorage.setItem('lang', \"ru\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Box sx={{display: 'flex'}}>\r\n            <CssBaseline/>\r\n            <StyledAppBar position=\"fixed\" open={open}>\r\n                <Toolbar>\r\n                    {campaignId && <IconButton\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick={handleDrawerOpen}\r\n                        edge=\"start\"\r\n                        sx={{\r\n                            marginRight: '16px',\r\n                            ...(open && {display: 'none'}),\r\n                        }}\r\n                    >\r\n                        <MenuIcon/>\r\n                    </IconButton>}\r\n                    <Box sx={{flexGrow: 1}}>\r\n                        <MuiLink component={Link} color={\"inherit\"} underline=\"none\" variant=\"h6\" noWrap to={\"/\"} sx={{\r\n                            '&:hover': {\r\n                                color: 'white',\r\n                                boxShadow: 'none',\r\n                            }\r\n                        }}>\r\n                            GigaTurnip Tasks\r\n                        </MuiLink>\r\n                        <Typography variant={\"subtitle2\"}>{user?.email}</Typography>\r\n                    </Box>\r\n                    <Button color={\"inherit\"} onClick={handleLanguageChange}>{i18n.language}</Button>\r\n                    <Button color={\"inherit\"} onClick={() => logout(() => navigate('/'))}>{t(\"appbar.log_out\")}</Button>\r\n                </Toolbar>\r\n            </StyledAppBar>\r\n            {campaignId && <Drawer variant=\"permanent\" open={open}>\r\n                <DrawerHeader>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'rtl' ? <ChevronRightIcon/> : <ChevronLeftIcon/>}\r\n                    </IconButton>\r\n                </DrawerHeader>\r\n                <Divider/>\r\n                <List>\r\n                    {renderDrawerItems()}\r\n                </List>\r\n            </Drawer>}\r\n            <Box component=\"main\" sx={{flexGrow: 1, width: \"100%\"}}>\r\n                <DrawerHeader/>\r\n                {children}\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport Appbar from \"./appbar/Appbar\";\r\nimport { Outlet } from \"react-router-dom\";\r\n\r\nconst Layout = () => {\r\n    return (\r\n        <div>\r\n            <Appbar>\r\n                <Outlet />\r\n            </Appbar>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Layout","import React from \"react\";\r\nimport {Box, Button, Typography} from \"@mui/material\";\r\nimport {useAuth} from \"../../context/authentication/hooks/useAuth\";\r\nimport {useLocation, useNavigate} from \"react-router-dom\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n\r\nconst Login = () => {\r\n    const {login} = useAuth();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const {t} = useTranslation();\r\n\r\n    // @ts-ignore\r\n    const from = location?.state?.from?.pathname || \"/\";\r\n\r\n    const handleLogin = () => {\r\n        login(() => navigate(from, {replace: true}))\r\n    }\r\n\r\n    return (\r\n        <Box p={3}>\r\n            <Typography align=\"center\" variant=\"h4\">{t(\"sign_up_page.title\")}</Typography>\r\n            <Typography variant=\"body1\" align=\"center\">{t(\"sign_up_page.description1\")}</Typography>\r\n            <Typography variant=\"body1\" align=\"center\">{t(\"sign_up_page.description2\")}</Typography>\r\n            <Box display={\"flex\"} justifyContent={\"center\"} p={2}>\r\n                <Button size=\"large\" color=\"primary\" variant=\"contained\" fullWidth={true}\r\n                        onClick={handleLogin}>{t(\"sign_up_page.sign_up_button\")}</Button>\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Login","import React from 'react';\r\nimport {Button, CardActions, CardContent, Typography} from '@mui/material'\r\nimport MuiCard from '@mui/material/Card';\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {\r\n    data: any;\r\n    onClick: (id: number) => void;\r\n};\r\n\r\nconst Card = (props: Props) => {\r\n    const {data, onClick} = props;\r\n    const {name, description, id, reopened} = data;\r\n\r\n    const {t} = useTranslation();\r\n\r\n    const handleClick = () => {\r\n        onClick(id)\r\n    }\r\n\r\n    return (\r\n        <MuiCard>\r\n            <CardContent sx={{pb: 1}}>\r\n                <Typography variant=\"h5\" component=\"div\">\r\n                    {name}\r\n                </Typography>\r\n                <Typography gutterBottom variant={\"caption\"} color=\"text.secondary\">ID: {id}</Typography>\r\n                <Typography overflow={\"hidden\"} textOverflow={\"ellipsis\"} variant=\"body2\"\r\n                            sx={{height: 60, maxWidth: 500}}>\r\n                    {description}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions sx={{justifyContent: \"space-between\"}}>\r\n                <Button size=\"small\" onClick={handleClick}>{t(\"open\")}</Button>\r\n                <Typography color={\"error\"} hidden={!reopened}>{t('returned')}</Typography>\r\n            </CardActions>\r\n        </MuiCard>\r\n    );\r\n};\r\n\r\nexport default Card","import React, {ReactNode, useEffect, useState} from 'react';\r\nimport CardHeader from \"@mui/material/CardHeader\";\r\nimport {Button, Stack} from \"@mui/material\";\r\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\r\nimport Collapse from \"@mui/material/Collapse\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport Card from \"@mui/material/Card\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport IconButton, {IconButtonProps} from \"@mui/material/IconButton\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {\r\n    data: any,\r\n    hideExpandButton?: boolean,\r\n    hideOpenButton?: boolean,\r\n    extraActions?: ReactNode[],\r\n    onClick?: (id: number) => void\r\n};\r\n\r\ninterface ExpandMoreProps extends IconButtonProps {\r\n    expand: boolean;\r\n}\r\n\r\nconst ExpandMore = styled((props: ExpandMoreProps) => {\r\n    const {expand, ...other} = props;\r\n    return <IconButton {...other} />;\r\n})(({theme, expand}) => ({\r\n    transform: !expand ? 'rotate(0deg)' : 'rotate(180deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n        duration: theme.transitions.duration.shortest,\r\n    }),\r\n}));\r\n\r\nconst ExpandableCard: React.FC<Props> = (props) => {\r\n    const {data, children, hideExpandButton, hideOpenButton, extraActions, onClick} = props;\r\n    const {name, description, id} = data;\r\n    const [expand, setExpand] = useState(false);\r\n    const {t} = useTranslation();\r\n\r\n    const handleToggle = () => {\r\n        setExpand(!expand)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setExpand(false);\r\n    }, [id])\r\n\r\n    const handleClick = () => {\r\n        if (onClick) {\r\n            onClick(id)\r\n        }\r\n    }\r\n\r\n    const actions = [];\r\n    if (extraActions) {\r\n        actions.push(extraActions)\r\n    }\r\n\r\n    if (!hideOpenButton) {\r\n        actions.push(\r\n            <Button key={\"open_button\"} variant={\"contained\"} onClick={handleClick}>{t(\"open\")}</Button>\r\n        )\r\n    }\r\n\r\n    if (!hideExpandButton) {\r\n        actions.push(\r\n            <ExpandMore\r\n                key={\"expand_button\"}\r\n                expand={expand}\r\n                onClick={handleToggle}\r\n                aria-expanded={expand}\r\n                aria-label=\"show more\"\r\n            >\r\n                <ExpandMoreIcon/>\r\n            </ExpandMore>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader\r\n                action={\r\n                    <Stack direction=\"row\" spacing={1}>\r\n                        {actions}\r\n                    </Stack>\r\n                }\r\n                title={name}\r\n                subheader={`ID: ${id}`}\r\n                titleTypographyProps={{variant: \"h6\"}}\r\n                subheaderTypographyProps={{variant: \"caption\"}}\r\n            />\r\n            <Collapse in={expand} timeout=\"auto\" unmountOnExit>\r\n                <CardContent>\r\n                    {children}\r\n                </CardContent>\r\n            </Collapse>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default ExpandableCard","import React from 'react';\r\nimport {Grid, Typography} from \"@mui/material\";\r\nimport Card from \"../card/Card\";\r\nimport ExpandableCard from \"../card/ExpandableCard\";\r\nimport {ViewProps} from \"./List.types\";\r\n\r\ntype Props = {\r\n    data: any[],\r\n    view: ViewProps,\r\n    onSelect: (id: number) => void\r\n};\r\n\r\nconst ListContent: React.FC<Props> = (props) => {\r\n    const {data, view, children, onSelect} = props;\r\n    if (!data) {\r\n        return <Typography>Error</Typography>;\r\n    }\r\n\r\n    if (view === \"custom\") {\r\n        return <>{children}</>\r\n    }\r\n\r\n    if (view === \"grid\") {\r\n        return (\r\n            <Grid container py={2} spacing={{xs: 2, md: 3}} columns={{xs: 4, sm: 8, md: 12}}>\r\n                {data.map((item, index) =>\r\n                    <Grid item xs={2} sm={4} md={4} key={index}>\r\n                        <Card data={item} onClick={onSelect}/>\r\n                    </Grid>\r\n                )}\r\n            </Grid>\r\n        );\r\n    }\r\n    if (view === \"list\") {\r\n        return (\r\n            <Grid container py={2} spacing={2}>\r\n                {data.map((item, index) =>\r\n                    <Grid item xs={12} key={index}>\r\n                        <ExpandableCard data={item} hideExpandButton={true} onClick={onSelect}>\r\n                            {children}\r\n                        </ExpandableCard>\r\n                    </Grid>\r\n                )}\r\n            </Grid>\r\n        );\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default ListContent","import React from 'react';\r\nimport {Button, Grid, IconButton, Tooltip, Typography} from \"@mui/material\";\r\nimport {Link} from \"react-router-dom\";\r\nimport GridViewIcon from \"@mui/icons-material/GridView\";\r\nimport ViewListIcon from \"@mui/icons-material/ViewList\";\r\nimport {ViewProps} from \"./List.types\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {\r\n    label?: string,\r\n    location: any,\r\n    view: ViewProps,\r\n    hideCreateButton?: boolean,\r\n    hideViewButton?: boolean,\r\n    onViewChange: (view: ViewProps) => void\r\n};\r\n\r\nconst ListHeader = (props: Props) => {\r\n    const {label, view, location, hideCreateButton, hideViewButton, onViewChange} = props;\r\n    const {t} = useTranslation();\r\n\r\n    return (\r\n        <Grid container alignItems={\"center\"} spacing={1}>\r\n            <Grid item flex={1}>\r\n                <Typography hidden={!label} variant={\"h4\"}>{label}</Typography>\r\n            </Grid>\r\n            <Grid item hidden={hideCreateButton}>\r\n                <Button component={Link} to={\"new\"} state={{from: location}} variant={\"contained\"} sx={{\r\n                    '&:hover': {\r\n                        color: 'white',\r\n                        boxShadow: 'none',\r\n                    }\r\n                }}>{t(\"list_header.create\")}</Button>\r\n            </Grid>\r\n            <Grid item hidden={hideViewButton}>\r\n                <Tooltip title={t(\"list_header.grid\") as string}>\r\n                    <IconButton\r\n                        color={view === \"grid\" ? \"primary\" : \"default\"}\r\n                        onClick={() => onViewChange(\"grid\")}\r\n                    >\r\n                        <GridViewIcon/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n                <Tooltip title={t(\"list_header.list\") as string}>\r\n                    <IconButton\r\n                        color={view === \"list\" ? \"primary\" : \"default\"}\r\n                        onClick={() => onViewChange(\"list\")}\r\n                    >\r\n                        <ViewListIcon/>\r\n                    </IconButton>\r\n                </Tooltip>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default ListHeader","import React, {useEffect, useState} from 'react';\r\nimport {Box} from \"@mui/material\";\r\nimport {useLocation} from \"react-router-dom\";\r\nimport ListContent from \"./ListContent\";\r\nimport ListHeader from \"./ListHeader\";\r\nimport {ViewProps} from \"./List.types\";\r\n\r\n\r\ntype Props = {\r\n    data: any[],\r\n    id: string,\r\n    label?: string,\r\n    defaultView?: ViewProps;\r\n    hideCreateButton?: boolean,\r\n    hideViewButton?: boolean,\r\n    onSelect: (id: number) => void,\r\n    hidden?: boolean\r\n};\r\n\r\nconst List: React.FC<Props> = (props) => {\r\n    const {id, data, label, defaultView, hideCreateButton, hideViewButton, children, hidden, onSelect} = props;\r\n    const location = useLocation();\r\n\r\n    const [view, setView] = useState<ViewProps>(defaultView ?? \"grid\");\r\n\r\n    useEffect(() => {\r\n        if (!defaultView) {\r\n            const view = localStorage.getItem(`${id}_view`) as ViewProps || \"grid\";\r\n            if (view) {\r\n                setView(view)\r\n            }\r\n        }\r\n    }, [])\r\n\r\n    const handleViewChange = (view: ViewProps) => {\r\n        setView(view)\r\n        localStorage.setItem(`${id}_view`, view);\r\n    }\r\n\r\n    return (\r\n        <Box hidden={hidden}>\r\n            <ListHeader label={label} view={view} onViewChange={handleViewChange} location={location}\r\n                        hideCreateButton={hideCreateButton} hideViewButton={hideViewButton}/>\r\n            <ListContent data={data} view={view} onSelect={onSelect}>\r\n                {children}\r\n            </ListContent>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default List","const baseUrl = \"https://journal-bb5e3.uc.r.appspot.com/\"\r\n// const baseUrl = \"http://127.0.0.1:8000/\"\r\nconst campaignsUrl = \"api/v1/campaigns/\"\r\nconst chainsUrl = \"api/v1/chains/\"\r\nconst taskstagesUrl = \"api/v1/taskstages/\"\r\nconst ranksUrl = \"api/v1/ranks/\"\r\nconst rankslimitsUrl = \"api/v1/ranklimits/\"\r\nconst webhookstagesUrl = \"api/v1/webhookstages/\"\r\nconst conditionalstagesUrl = \"api/v1/conditionalstages/\"\r\nconst manualstagesUrl = \"api/v1/manualstages/\" // TBD\r\nconst casesUrl = \"api/v1/cases/\"\r\nconst tasksUrl = \"api/v1/tasks/\"\r\nconst notificationsUrl = \"/api/v1/notifications/\"\r\n\r\nexport {\r\n    baseUrl,\r\n    campaignsUrl,\r\n    chainsUrl,\r\n    taskstagesUrl,\r\n    ranksUrl,\r\n    rankslimitsUrl,\r\n    webhookstagesUrl,\r\n    conditionalstagesUrl,\r\n    casesUrl,\r\n    tasksUrl,\r\n    manualstagesUrl,\r\n    notificationsUrl\r\n}","import React from \"react\";\r\nimport {ToastContext} from \"../ToastProvider\";\r\n\r\nexport const useToast = () => React.useContext(ToastContext);","import {\r\n    baseUrl,\r\n    campaignsUrl,\r\n    chainsUrl,\r\n    conditionalstagesUrl,\r\n    notificationsUrl,\r\n    taskstagesUrl,\r\n    tasksUrl\r\n} from \"./Urls\";\r\nimport defaultAxios from \"axios\";\r\nimport {useAuth} from \"../../context/authentication/hooks/useAuth\";\r\nimport {useToast} from \"../../context/toast/hooks/useToast\";\r\n\r\n\r\nconst useAxios = () => {\r\n    const {openToast} = useToast();\r\n    const {getToken} = useAuth();\r\n    const axios = defaultAxios.create({\r\n        baseURL: baseUrl\r\n    });\r\n\r\n    axios.interceptors.request.use(\r\n        config => {\r\n            return getToken().then(token => {\r\n                if (token && config && config.headers) {\r\n                    config.headers[\"Authorization\"] = 'JWT ' + token;\r\n                }\r\n                return config;\r\n            });\r\n        },\r\n        error => Promise.reject(error)\r\n    );\r\n\r\n    // Pagination Functions\r\n    const paginatedDataHandler = (\r\n        data: any,\r\n        setDataFunction: (res: any) => void,\r\n        setCountFunction: (count: number) => void,\r\n    ) => {\r\n        const {results, count} = data;\r\n        const numOfPages = Math.ceil(count / 10)\r\n        console.log(\"numOfPages\", numOfPages)\r\n        console.log(\"results\", results)\r\n        setDataFunction(results)\r\n        setCountFunction(numOfPages)\r\n    }\r\n\r\n    const createPaginationURL = (request: string, page?: number) => {\r\n        if (page && page > 0) {\r\n            return `${request}&limit=10&offset=${(page - 1) * 10}`\r\n        } else {\r\n            return request\r\n        }\r\n    }\r\n\r\n    const getCampaigns = () => {\r\n        return axios.get(`${campaignsUrl}?limit=1000`)\r\n            .then(res => res.data)\r\n            .then(res => res.results);\r\n    }\r\n\r\n    const getUserCampaigns = () => {\r\n        return axios.get(`${campaignsUrl}list_user_campaigns/`)\r\n            .then(res => res.data);\r\n    }\r\n\r\n    const getSelectableCampaigns = () => {\r\n        return axios.get(campaignsUrl + 'list_user_selectable/')\r\n            .then(res => res.data);\r\n    }\r\n\r\n    const requestCampaignJoin = (id: number) => {\r\n        return axios.post(campaignsUrl + id + '/join_campaign/')\r\n    }\r\n\r\n    const requestCampaignInfo = (id: number) => {\r\n        return axios.get(campaignsUrl + id + '/')\r\n            .then(res => res.data)\r\n    }\r\n\r\n    const getChains = (campaignId: number) => {\r\n        return axios.get(`${chainsUrl}?campaign=${campaignId}&limit=1000`)\r\n            .then(res => res.data)\r\n            .then(res => res.results)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const createChain = (data: { name: string, campaign: number, description?: string }) => {\r\n        return axios.post(`${chainsUrl}`, data)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const getStageNodes = (campaignId: number, chainId: number) => {\r\n        return axios.get(`${taskstagesUrl}?chain__campaign=${campaignId}&chain=${chainId}&limit=1000`)\r\n            .then(res => res.data)\r\n            .then(res => res.results)\r\n            .catch((err) => openToast(err.message));\r\n    };\r\n\r\n    const getLogicNodes = (campaignId: number, chainId: number) => {\r\n        return axios.get(`${conditionalstagesUrl}?chain__campaign=${campaignId}&chain=${chainId}&limit=1000`)\r\n            .then(res => res.data)\r\n            .then(res => res.results)\r\n            .catch((err) => openToast(err.message));\r\n    };\r\n\r\n    const getTaskStage = (id: number) => {\r\n        return axios.get(`${taskstagesUrl + id}/`)\r\n            .then(res => res.data)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const saveTaskStage = (id: number, data: any) => {\r\n        return axios.patch(`${taskstagesUrl + id}/`, data)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const getTaskStageOptions = () => {\r\n        return axios.options(`${taskstagesUrl}`)\r\n            .then(res => res.data)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const getConditionalStage = (id: number) => {\r\n        return axios.get(`${conditionalstagesUrl + id}/`)\r\n            .then(res => res.data)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const saveConditionalStage = (id: number, data: any) => {\r\n        return axios.patch(`${conditionalstagesUrl + id}/`, data)\r\n            .catch((err) => openToast(err.message));\r\n    }\r\n\r\n    const getTaskFields = (id: number) => {\r\n        return axios.get(`${taskstagesUrl + id}/schema_fields/`)\r\n            .then(res => res.data);\r\n    }\r\n\r\n    // TaskCard Functions\r\n    const requestTaskCreation = (id: number) => {\r\n        return axios.post(taskstagesUrl + id + '/create_task/')\r\n            .then(res => res.data)\r\n    }\r\n\r\n    const requestTaskAssignment = (id: number) => {\r\n        return axios.post(tasksUrl + id + '/request_assignment/')\r\n            .then(res => res.data)\r\n    }\r\n\r\n    // TaskMenu Functions\r\n    const getSelectableTasks = (campaignId: number, page?: number, filter?: string) => {\r\n        let url = createPaginationURL(`${tasksUrl}user_selectable/?stage__chain__campaign=${campaignId}`, page)\r\n        if (filter) {\r\n            url += `&task_responses=${filter}`\r\n        }\r\n        console.log(url)\r\n        return axios.get(url).then(res => {\r\n            console.log(\"getSelectableTasks\", res.data)\r\n            return res.data;\r\n        })\r\n    };\r\n\r\n    const getCompleteTasks = (campaignId: number) => {\r\n        return axios.get(`${tasksUrl}user_relevant/?complete=${true}&stage__chain__campaign=${campaignId}`)\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                console.log(\"getCompleteTasks\", res)\r\n                return (res)\r\n            })\r\n    };\r\n\r\n    const getOpenTasks = (campaignId: number) => {\r\n        return axios.get(`${tasksUrl}user_relevant/?complete=${false}&stage__chain__campaign=${campaignId}`)\r\n            .then(res => res.data)\r\n            .then(res => {\r\n                console.log(\"getOpenTasks\", res)\r\n                return (res)\r\n            })\r\n    };\r\n\r\n    const getCreatableTasks = (campaignId: number) => {\r\n        return axios.get(`${taskstagesUrl}user_relevant/?chain__campaign=${campaignId}`)\r\n            .then(res => res.data)\r\n    };\r\n\r\n    // Task Functions\r\n    const getPreviousTasks = (id: number) => {\r\n        return axios.get(`${tasksUrl + id}/list_displayed_previous/`)\r\n            .then(res => res.data)\r\n    }\r\n\r\n    const getTask = (id: number) => {\r\n        return axios.get(`${tasksUrl + id}/`)\r\n            .then((res: any) => res.data)\r\n    }\r\n\r\n    const saveTask = (id: number, data: { responses: any, complete?: boolean }) => {\r\n        return axios.patch(`${tasksUrl + id}/`, data)\r\n            .then(res => res.data)\r\n    }\r\n\r\n    const releaseTask = (id: number) => {\r\n        return axios.post(`${tasksUrl + id}/release_assignment/`)\r\n            .then(res => res.data)\r\n    }\r\n\r\n    const openPreviousTask = (id: number) => {\r\n        return axios.get(`${tasksUrl + id}/open_previous/`)\r\n            .then(res => res.data)\r\n    }\r\n\r\n    const getIntegratedData = (id: number) => {\r\n        return axios.get(`${tasksUrl + id}/get_integrated_tasks/`)\r\n            .then(res => res.data);\r\n    }\r\n\r\n    const triggerTaskWebhook = (id: number) => {\r\n        return axios.get(`${tasksUrl + id}/trigger_webhook/`)\r\n    }\r\n\r\n    const getDynamicSchema = (id: number, formData: any) => {\r\n        return axios.get(`${taskstagesUrl + id}/load_schema_answers/?responses=${formData}`)\r\n            .then(res => res.data);\r\n    }\r\n\r\n    // Notifications Functions\r\n    const getUserNotifications = (campaignId: number, viewed: boolean, importance?: number, page?: number) => {\r\n        const url = createPaginationURL(`${notificationsUrl}list_user_notifications/?campaign=${campaignId}&viewed=${viewed}`, page)\r\n        if (importance === 0) {\r\n            return axios.get(`${url}&importance=${importance}`)\r\n                .then(res => res.data)\r\n        } else {\r\n            return axios.get(url)\r\n                .then(res => res.data)\r\n        }\r\n    }\r\n\r\n    const getNotificationContent = (id: number) => {\r\n        return axios.get(`${notificationsUrl + id}/`).then(res => res.data)\r\n    }\r\n\r\n    return {\r\n        axios,\r\n        getCampaigns,\r\n        getChains,\r\n        createChain,\r\n        getStageNodes,\r\n        getLogicNodes,\r\n        getTaskStage,\r\n        saveTaskStage,\r\n        getTaskStageOptions,\r\n        getConditionalStage,\r\n        saveConditionalStage,\r\n        getUserCampaigns,\r\n        getSelectableCampaigns,\r\n        requestCampaignJoin,\r\n        requestCampaignInfo,\r\n        requestTaskCreation,\r\n        requestTaskAssignment,\r\n        getCompleteTasks,\r\n        getOpenTasks,\r\n        getCreatableTasks,\r\n        getSelectableTasks,\r\n        getPreviousTasks,\r\n        getTask,\r\n        saveTask,\r\n        releaseTask,\r\n        openPreviousTask,\r\n        getIntegratedData,\r\n        triggerTaskWebhook,\r\n        getUserNotifications,\r\n        getNotificationContent,\r\n        getTaskFields,\r\n        getDynamicSchema\r\n    }\r\n}\r\n\r\nexport default useAxios;","const useHelpers = () => {\r\n\r\n    const parseId = (id: string | undefined) => {\r\n        if (id) {\r\n            return parseInt(id);\r\n        } else {\r\n            throw new Error(\"No id\");\r\n        }\r\n    }\r\n\r\n    const parseJson = (text: string | undefined) => {\r\n        if (text) {\r\n            return JSON.parse(text);\r\n        } else {\r\n            return {}\r\n        }\r\n    }\r\n\r\n    const parseTaskData = (data: any) => {\r\n        return ({\r\n            responses: data.responses,\r\n            schema: parseJson(data.stage.json_schema),\r\n            uiSchema: parseJson(data.stage.ui_schema)\r\n        })\r\n    }\r\n\r\n    const formatDateString = (date: string) => {\r\n        const d = new Date(date)\r\n        const year = d.getFullYear()\r\n        const month = addZeroesToDate(d.getMonth() + 1)\r\n        const day = addZeroesToDate(d.getDate())\r\n        const hours = addZeroesToDate(d.getHours())\r\n        const minutes = addZeroesToDate(d.getMinutes())\r\n        const seconds = addZeroesToDate(d.getSeconds())\r\n        return `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`\r\n    }\r\n\r\n    const addZeroesToDate = (date: number) => {\r\n        return date < 10 ? '0' + date : date\r\n    }\r\n\r\n    return {\r\n        parseId,\r\n        parseJson,\r\n        parseTaskData,\r\n        formatDateString\r\n    };\r\n};\r\n\r\nexport default useHelpers\r\n","import React, {useCallback, useEffect, useState} from \"react\";\r\n\r\nimport {WidgetProps} from \"@rjsf/core\";\r\nimport {useReactMediaRecorder} from \"react-media-recorder\";\r\nimport {Box, Button, CircularProgress, Grid} from \"@mui/material\";\r\nimport RadioButtonCheckedIcon from '@mui/icons-material/RadioButtonChecked';\r\nimport StopCircleIcon from '@mui/icons-material/StopCircle';\r\nimport {storage} from \"../../../../services/firebase/Firebase\"\r\nimport {keyframes} from \"@emotion/react\";\r\nimport styled from \"@emotion/styled\";\r\nimport {getDownloadURL, ref, uploadBytes} from \"firebase/storage\";\r\n\r\nconst AudioWidget = ({\r\n                         schema,\r\n                         id,\r\n                         options,\r\n                         value,\r\n                         required,\r\n                         disabled,\r\n                         readonly,\r\n                         label,\r\n                         formContext,\r\n                         onChange,\r\n                         onBlur\r\n                     }: WidgetProps) => {\r\n\r\n    const [record, setRecord] = useState<any>(null)\r\n    const [loader, setLoader] = useState(false)\r\n\r\n    const {storagePath} = formContext;\r\n    const privateUpload = options.private ? options.private : false;\r\n    const defaultRecord = options.default ? options.default : false;\r\n\r\n    const privatePath = privateUpload ? \"private\" : \"public\";\r\n    const storageRef = ref(storage, `${privatePath}/${storagePath}`);\r\n\r\n    useEffect(() => {\r\n        if (defaultRecord) {\r\n            setRecord(options.default)\r\n        }\r\n        else if (value) {\r\n            getDownloadURL(ref(storage, value))\r\n                .then(url => setRecord(url))\r\n        }\r\n    }, [value])\r\n\r\n    const Indicator = styled.div`\r\n      width: 10px;\r\n      height: 10px;\r\n      margin-left: 8px;\r\n      border-radius: 50%;\r\n      background-color: red;\r\n      animation: ${keyframes`50% {opacity: 0;}`} 1s linear infinite;\r\n    `\r\n\r\n    const handleStopRecording = async (blobUrl: string, blob: Blob) => {\r\n        setLoader(true)\r\n        setRecord(blobUrl)\r\n        const ext = blob.type.split('/')[1]\r\n        const filename = id.replace(/\\./g, '_').replace(/ /g, '_') + '.' + ext\r\n        const fileRef = ref(storageRef, filename)\r\n        const path = await uploadBytes(fileRef, blob).then((snapshot: any) => snapshot.ref.fullPath)\r\n        setLoader(false)\r\n        onChange(path);\r\n        onBlur(id, path)\r\n    }\r\n\r\n    const {\r\n        status,\r\n        startRecording,\r\n        stopRecording\r\n    } = useReactMediaRecorder({video: false, onStop: handleStopRecording});\r\n\r\n    const renderButton = (status: string) => {\r\n        switch (status) {\r\n            case \"recording\":\r\n                return (\r\n                    <Button\r\n                        variant={\"contained\"}\r\n                        onClick={stopRecording}\r\n                        sx={{marginBottom: 1}}\r\n                        disabled={disabled || readonly}\r\n                        endIcon={<StopCircleIcon/>}\r\n                    >\r\n                        Остановить\r\n                    </Button>\r\n                );\r\n            default:\r\n                return (\r\n                    <Button\r\n                        variant={\"contained\"}\r\n                        onClick={startRecording}\r\n                        sx={{marginBottom: 1}}\r\n                        disabled={disabled || readonly}\r\n                        endIcon={<RadioButtonCheckedIcon sx={{fill: disabled || readonly ? \"grey\" : \"red\"}}/>}\r\n                    >\r\n                        Запись\r\n                    </Button>\r\n                );\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <Box>\r\n            <label className={\"form-label\"}>{label}{required && \"*\"}</label>\r\n            {!defaultRecord && <Grid container alignItems={\"center\"}>\r\n                <Grid item>{renderButton(status)}</Grid>\r\n                <Grid item>{status === \"recording\" && <Indicator/>}</Grid>\r\n                <Grid item>{loader && <CircularProgress sx={{marginLeft: 1}} size={30}/>}</Grid>\r\n            </Grid>}\r\n            {record && <Grid container>\r\n                <audio controls src={record}/>\r\n            </Grid>}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default AudioWidget;","import React from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport { WidgetProps } from \"@rjsf/core\";\r\n\r\nconst TextWidget = ({\r\n  id,\r\n  placeholder,\r\n  required,\r\n  readonly,\r\n  disabled,\r\n  label,\r\n  value,\r\n  onChange,\r\n  onBlur,\r\n  onFocus,\r\n  autofocus,\r\n  options,\r\n  schema,\r\n  rawErrors = [],\r\n\r\n}: WidgetProps) => {\r\n  const _onChange = ({\r\n    target: { value },\r\n  }: React.ChangeEvent<HTMLInputElement>) =>\r\n    onChange(value === \"\" ? options.emptyValue : value);\r\n  const _onBlur = ({ target: { value } }: React.FocusEvent<HTMLInputElement>) =>\r\n    onBlur(id, value);\r\n  const _onFocus = ({\r\n    target: { value },\r\n  }: React.FocusEvent<HTMLInputElement>) => onFocus(id, value);\r\n  const inputType = (schema.type) === 'string' ?  'text' : `${schema.type}`\r\n    \r\n  return (\r\n    <Form.Group className=\"mb-0\">\r\n      <Form.Label className={rawErrors.length > 0 ? \"text-danger\" : \"\"}>\r\n        {label || schema.title}\r\n        {(label || schema.title) && required ? \"*\" : null}\r\n      </Form.Label>\r\n      <Form.Control\r\n        id={id}\r\n        placeholder={placeholder}\r\n        autoFocus={autofocus}\r\n        required={required}\r\n        disabled={disabled}\r\n        readOnly={readonly}\r\n        className={rawErrors.length > 0 ? \"is-invalid\" : \"\"}\r\n        list={schema.examples ? `examples_${id}` : undefined}\r\n        type={inputType}\r\n        value={value || value === 0 ? value : \"\"}\r\n        onChange={_onChange}\r\n        onBlur={_onBlur}\r\n        onFocus={_onFocus}\r\n\r\n      />\r\n      {schema.examples ? (\r\n        <datalist id={`examples_${id}`}>\r\n          {(schema.examples as string[])\r\n            .concat(schema.default ? ([schema.default] as string[]) : [])\r\n            .map((example: any) => {\r\n              return <option key={example} value={example} />;\r\n            })}\r\n        </datalist>\r\n      ) : null}\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default TextWidget;","import {uploadBytesResumable, ref, getDownloadURL} from \"firebase/storage\";\n\nconst returnNewState = (prevState, update, multiple) => {\n    if (multiple) {\n        if (prevState) {\n            return {...prevState, ...update}\n        } else {\n            return update\n        }\n    } else {\n        return update\n    }\n}\n\nconst upload = async (files, storageRef, setFileBeingUploaded, setFileLinks, multiple) => {\n    if (storageRef) {\n        if (!multiple) {\n            setFileBeingUploaded({})\n            setFileLinks({})\n        }\n        await Promise.all(files.map(async file => {\n            const period = file.name.lastIndexOf('.');\n            const name = file.name.substring(0, period);\n            const ext = file.name.substring(period);\n            const filename = name.replace(/\\./g, '_').replace(/ /g, '_') + ext;\n\n            const fileRef = ref(storageRef, file.name)\n            const uploadTask = uploadBytesResumable(fileRef, file)\n\n            setFileBeingUploaded(prevState => {\n                const update = {[filename]: {status: \"loading\", progress: 0}}\n                return prevState ? {...prevState, ...update} : update\n            })\n\n            // Listen for state changes, errors, and completion of the upload.\n            uploadTask.on('state_changed', // or 'state_changed'\n                snapshot => {\n                    // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n                    setFileBeingUploaded(prevState => {\n                        const update = {[filename]: {status: \"loading\", progress: progress}}\n                        return prevState ? {...prevState, ...update} : update\n                    })\n                },\n                error => {\n                    console.log(error)\n                },\n                () => {\n                    // Upload completed successfully, now we can get the download URL\n                    getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n                        const filePath = uploadTask.snapshot.ref.fullPath\n                        const fileLink = downloadURL\n                        setFileBeingUploaded(prevState => {\n                            const update = {[filename]: {status: \"complete\", progress: 100, url: fileLink}}\n                            return returnNewState(prevState, update, multiple)\n                        })\n                        setFileLinks(prevState => {\n                            const update = {[filename]: filePath}\n                            return returnNewState(prevState, update, multiple)\n                        })\n                    });\n                });\n        }))\n    }\n}\n\nexport default upload","import React from 'react'\nimport {Box, LinearProgress, Typography} from \"@mui/material\"\n\nconst LinearProgressWithLabel = (props: any) => {\n    return (\n        <Box display=\"flex\" alignItems=\"center\">\n            <Box width=\"100%\" mr={1}>\n                <LinearProgress variant=\"determinate\" {...props} />\n            </Box>\n            <Box minWidth={35}>\n                <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\n                    props.value,\n                )}%`}</Typography>\n            </Box>\n        </Box>\n    );\n}\n\nexport default LinearProgressWithLabel","import React, {useEffect, useState} from 'react'\r\nimport upload from \"./Upload\";\r\nimport LinearProgressWithLabel from \"../../../progress/LinearProgressWithLabel\";\r\nimport ImageViewer from 'react-simple-image-viewer';\r\nimport {Box, Button, Dialog} from \"@mui/material\";\r\nimport {ref, getDownloadURL, getMetadata} from \"firebase/storage\";\r\nimport {storage} from \"../../../../services/firebase/Firebase\";\r\nimport {styled} from \"@mui/material/styles\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n\r\nconst Input = styled('input')({\r\n    display: 'none',\r\n});\r\n\r\nconst CustomFileWidget = (props: any) => {\r\n    const {schema, uiSchema, disabled, required, formContext, value, id} = props;\r\n    const {storagePath} = formContext;\r\n    const [uploadedFiles, setUploadedFiles] = useState<any>({})\r\n    const [fileLinks, setFileLinks] = useState<any>({})\r\n    const [currentFile, setCurrentFile] = useState(\"\")\r\n    const [isImageOpen, setIsImageOpen] = useState(false);\r\n    const [isVideoOpen, setIsVideoOpen] = useState(false);\r\n    const [fileType, setFileType] = useState(\"\")\r\n    const [parsedValue, setParsedValue] = useState<any>({})\r\n\r\n    const {t} = useTranslation();\r\n\r\n    const privateUpload = uiSchema[\"ui:options\"] && uiSchema[\"ui:options\"].private ? uiSchema[\"ui:options\"].private : false\r\n    const multipleSelect = uiSchema[\"ui:options\"] && uiSchema[\"ui:options\"].multiple ? uiSchema[\"ui:options\"].multiple : false\r\n    const hasUploadedFiles = Object.keys(uploadedFiles).length > 0\r\n    const isInputRequired = required && !hasUploadedFiles\r\n\r\n    const privatePath = privateUpload ? \"private\" : \"public\";\r\n    const storageRef = ref(storage, `${privatePath}/${storagePath}`);\r\n\r\n    useEffect(() => {\r\n        if (value && Object.keys(value).length > 0) {\r\n            const parsed = JSON.parse(value)\r\n            setParsedValue(parsed)\r\n            Object.keys(parsed).forEach(filename => {\r\n                const fileRef = ref(storage, parsed[filename])\r\n                getDownloadURL(fileRef)\r\n                    .then(url => setUploadedFiles((prevState: any) => ({\r\n                        ...prevState,\r\n                        [filename]: {url: url, status: \"complete\"}\r\n                    })))\r\n            })\r\n        }\r\n    }, [value])\r\n\r\n    const handleChange = async (event: any) => {\r\n        await upload([...event.target.files], storageRef, setUploadedFiles, setFileLinks, multipleSelect)\r\n        event.target.value = null;\r\n    };\r\n\r\n    const _onBlur = () => props.onBlur(id, uploadedFiles);\r\n    const _onFocus = () => props.onFocus(id, uploadedFiles);\r\n\r\n    useEffect(() => {\r\n        const updateFormResponses = async () => {\r\n            try {\r\n                let stringify = \"\";\r\n                if (multipleSelect) {\r\n                    const parsed = JSON.parse(value);\r\n                    const allFiles = {...parsed, ...fileLinks};\r\n                    stringify = JSON.stringify(allFiles);\r\n                } else {\r\n                    stringify = JSON.stringify(fileLinks);\r\n                }\r\n                await props.onChange(stringify);\r\n            } catch (error) {\r\n                const stringify = JSON.stringify(fileLinks)\r\n                console.error(error)\r\n                await props.onChange(stringify)\r\n            }\r\n        }\r\n\r\n        if (fileLinks && Object.keys(fileLinks).length > 0) {\r\n            console.log(\"fileLinks\", fileLinks)\r\n            updateFormResponses().then(() => _onBlur())\r\n        }\r\n    }, [fileLinks])\r\n\r\n    const deleteFile = async (filename: string) => {\r\n        const parsed = parsedValue\r\n        if (filename in parsed) {\r\n            delete parsed[filename]\r\n            const stringify = JSON.stringify(parsed)\r\n            await props.onChange(stringify)\r\n            _onBlur()\r\n        }\r\n\r\n        const links = {...fileLinks}\r\n        if (filename in links) {\r\n            delete links[filename]\r\n            setFileLinks(links)\r\n        }\r\n\r\n        const uploaded = {...uploadedFiles}\r\n        if (filename in uploaded) {\r\n            delete uploaded[filename]\r\n            setUploadedFiles(uploaded)\r\n        }\r\n        console.log(\"DELETE LOG\", uploaded)\r\n    };\r\n\r\n    const handleFileClick = async (filename: string) => {\r\n        const parsed = parsedValue;\r\n        console.log(\"FILE CLICK VALUE\", parsed)\r\n        if (filename in parsed) {\r\n            const path = parsed[filename];\r\n            console.log(path)\r\n            const metadata = await getMetadata(ref(storage, path));\r\n            if (metadata && metadata.contentType) {\r\n                const type = metadata.contentType.split(\"/\")[0]\r\n                const ext = metadata.contentType.split(\"/\")[1]\r\n                console.log(\"FILE TYPE\", type)\r\n                switch (type) {\r\n                    case \"image\":\r\n                        setCurrentFile(uploadedFiles[filename].url);\r\n                        setFileType(metadata.contentType);\r\n                        setIsImageOpen(true);\r\n                        break;\r\n                    case \"video\":\r\n                        setCurrentFile(uploadedFiles[filename].url);\r\n                        if (ext === 'quicktime') {\r\n                            setFileType('video/mp4');\r\n                        } else {\r\n                            setFileType(metadata.contentType);\r\n                        }\r\n                        setIsVideoOpen(true);\r\n                        break;\r\n                    default:\r\n                        window.open(uploadedFiles[filename].url, '_blank');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const closeViewer = () => {\r\n        setCurrentFile(\"\")\r\n        setFileType(\"\");\r\n        setIsImageOpen(false);\r\n        setIsVideoOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {isImageOpen && <ImageViewer\r\n                src={[currentFile]}\r\n                disableScroll={false}\r\n                backgroundStyle={{\r\n                    backgroundColor: \"rgba(0,0,0,0.8)\"\r\n                }}\r\n                closeOnClickOutside={true}\r\n                onClose={closeViewer}\r\n            />}\r\n            <Dialog\r\n                open={isVideoOpen}\r\n                onClose={closeViewer}\r\n                fullWidth={true}\r\n            >\r\n                <video height=\"360px\" controls>\r\n                    <source src={currentFile} type={fileType}/>\r\n                    Your browser does not support the video tag.\r\n                </video>\r\n            </Dialog>\r\n\r\n            <label className={\"form-label\"}>\r\n                {schema?.title}\r\n                {schema?.title && required ? \"*\" : null}\r\n            </label>\r\n            <br/>\r\n            {/*<label htmlFor=\"contained-button-file\" style={{paddingBottom: 8}}>*/}\r\n            {/*    <Input*/}\r\n            {/*        id=\"contained-button-file\"*/}\r\n            {/*        disabled={disabled}*/}\r\n            {/*        required={isInputRequired}*/}\r\n            {/*        multiple={multipleSelect} type=\"file\"*/}\r\n            {/*        onChange={handleChange}*/}\r\n            {/*        onBlur={_onBlur}*/}\r\n            {/*        onFocus={_onFocus}*/}\r\n            {/*    />*/}\r\n            {/*    <Button disabled={disabled} variant=\"contained\" component=\"span\">*/}\r\n            {/*        {t('choose_files')}*/}\r\n            {/*    </Button>*/}\r\n            {/*</label>*/}\r\n\r\n            <Box pb={1}>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    component=\"label\"\r\n                    disabled={disabled}\r\n                >\r\n                    {t('files.choose_files')}\r\n                    <input\r\n                        type=\"file\"\r\n                        hidden\r\n                        disabled={disabled}\r\n                        required={isInputRequired}\r\n                        multiple={multipleSelect}\r\n                        onChange={handleChange}\r\n                        onBlur={_onBlur}\r\n                        onFocus={_onFocus}\r\n                    />\r\n                </Button>\r\n            </Box>\r\n\r\n            {\r\n                Object.keys(uploadedFiles).map((filename, i) =>\r\n                    <div key={filename}>\r\n                        <div style={{display: \"flex\", alignItems: \"baseline\"}}>\r\n                            <p>{filename}</p>\r\n                            {uploadedFiles[filename].status === 'complete' &&\r\n                                <div style={{display: \"flex\", alignItems: \"baseline\"}}>\r\n                                    <button\r\n                                        onClick={() => handleFileClick(filename)}\r\n                                        style={{fontSize: \"14px\", padding: 0, margin: \"0 10px\"}}\r\n                                        type=\"button\"\r\n                                        className=\"btn btn-link text-success\"\r\n                                    >\r\n                                        {t(\"files.view_file\")}\r\n                                    </button>\r\n                                    {!disabled &&\r\n                                        <button\r\n                                            onClick={() => deleteFile(filename)}\r\n                                            style={{fontSize: \"14px\", padding: 0, margin: \"0 10px\"}}\r\n                                            type=\"button\"\r\n                                            className=\"btn btn-link text-danger\"\r\n                                        >\r\n                                            {t(\"files.remove_file\")}\r\n                                        </button>}\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                        {uploadedFiles[filename].status === 'loading' &&\r\n                            <LinearProgressWithLabel value={uploadedFiles[filename].progress}/>}\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CustomFileWidget","import React from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport {WidgetProps} from \"@rjsf/core\";\r\n\r\nconst CustomLinkWidget = ({required, label, value, schema, rawErrors = []}: WidgetProps) => {\r\n    return (\r\n        value ? <Form.Group className=\"mb-0\">\r\n                <Form.Label className={rawErrors.length > 0 ? \"text-danger\" : \"\"}>\r\n                    {label || schema.title}\r\n                    {(label || schema.title) && required ? \"*\" : null}\r\n                </Form.Label>\r\n                <br/>\r\n                <a href={value}>{value}</a>\r\n            </Form.Group>\r\n            : null\r\n    );\r\n};\r\n\r\nexport default CustomLinkWidget;","import React from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport { WidgetProps } from \"@rjsf/core\";\r\n\r\nconst RadioWidget = ({\r\n  id,\r\n  schema,\r\n  options,\r\n  value,\r\n  required,\r\n  disabled,\r\n  readonly,\r\n  label,\r\n  onChange,\r\n  onBlur,\r\n  onFocus,\r\n}: WidgetProps) => {\r\n  const { enumOptions, enumDisabled } = options;\r\n\r\n  const _onChange = ({\r\n    target: { value },\r\n  }: React.ChangeEvent<HTMLInputElement>) =>\r\n    onChange(schema.type == \"boolean\" ? value !== \"false\" : value);\r\n  const _onBlur = ({ target: { value } }: React.FocusEvent<HTMLInputElement>) =>\r\n    onBlur(id, value);\r\n  const _onFocus = ({\r\n    target: { value },\r\n  }: React.FocusEvent<HTMLInputElement>) => onFocus(id, value);\r\n\r\n  const inline = Boolean(options && options.inline);\r\n\r\n  return (\r\n    <Form.Group className=\"mb-0\">\r\n      <Form.Label className=\"d-block\">\r\n        {label || schema.title}\r\n        {(label || schema.title) && required ? \"*\" : null}\r\n      </Form.Label>\r\n      {(enumOptions as any).map((option: any, i: number) => {\r\n        const itemDisabled =\r\n          Array.isArray(enumDisabled) &&\r\n          enumDisabled.indexOf(option.value) !== -1;\r\n        const checked = option.value == value;\r\n\r\n        const radio = (\r\n          <Form.Check\r\n            inline={inline}\r\n            label={option.label}\r\n            id={`${id}_${option.label}`}\r\n            key={i}\r\n            name={id}\r\n            type=\"radio\"\r\n            disabled={disabled || itemDisabled || readonly}\r\n            checked={checked}\r\n            required={required}\r\n            value={option.value}\r\n            onChange={_onChange}\r\n            onBlur={_onBlur}\r\n            onFocus={_onFocus}\r\n          />\r\n        );\r\n        return radio;\r\n      })}\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default RadioWidget;","import React from \"react\";\r\nimport {WidgetProps} from \"@rjsf/core\";\r\nimport {DateTimePicker, LocalizationProvider} from \"@mui/lab\";\r\nimport {TextField} from \"@mui/material\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport enLocale from \"date-fns/locale/en-GB\";\r\nimport ruLocale from \"date-fns/locale/ru\";\r\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n\r\nfunction DateTimeWidget(props: WidgetProps) {\r\n    const {\r\n        schema,\r\n        required,\r\n        disabled,\r\n        readonly,\r\n        label,\r\n        value,\r\n        onChange,\r\n    } = props;\r\n\r\n    const {i18n, t} = useTranslation();\r\n\r\n    const localeMap: any = {\r\n        en: enLocale,\r\n        ru: ruLocale,\r\n    };\r\n\r\n    return (\r\n        <LocalizationProvider dateAdapter={AdapterDateFns} locale={localeMap[i18n.language]}><Form.Group\r\n            className=\"mb-0\">\r\n            <Form.Label className=\"d-block\">\r\n                {label || schema.title}\r\n                {(label || schema.title) && required ? \"*\" : null}\r\n            </Form.Label>\r\n            <DateTimePicker\r\n                inputFormat=\"dd.MM.yyyy HH:mm\"\r\n                mask=\"__.__.____ __:__\"\r\n                disabled={disabled}\r\n                readOnly={readonly}\r\n                value={value ? new Date(value) : null}\r\n                label={t(\"widgets.date_time_label\")}\r\n                onChange={value => onChange(value?.toJSON())}\r\n                ignoreInvalidInputs={true}\r\n                renderInput={(params) => <TextField {...params} hiddenLabel fullWidth size=\"small\"/>}\r\n            />\r\n        </Form.Group>\r\n        </LocalizationProvider>\r\n    );\r\n}\r\n\r\nexport default DateTimeWidget;","import React from \"react\";\r\nimport {WidgetProps} from \"@rjsf/core\";\r\nimport {DatePicker, LocalizationProvider} from \"@mui/lab\";\r\nimport {TextField} from \"@mui/material\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport enLocale from \"date-fns/locale/en-GB\";\r\nimport ruLocale from \"date-fns/locale/ru\";\r\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n\r\nfunction DateWidget(props: WidgetProps) {\r\n    const {\r\n        schema,\r\n        required,\r\n        disabled,\r\n        readonly,\r\n        label,\r\n        value,\r\n        onChange,\r\n    } = props;\r\n\r\n    const {i18n, t} = useTranslation();\r\n\r\n    const localeMap: any = {\r\n        en: enLocale,\r\n        ru: ruLocale,\r\n    };\r\n\r\n    return (\r\n        <LocalizationProvider dateAdapter={AdapterDateFns} locale={localeMap[i18n.language]}><Form.Group\r\n            className=\"mb-0\">\r\n            <Form.Label className=\"d-block\">\r\n                {label || schema.title}\r\n                {(label || schema.title) && required ? \"*\" : null}\r\n            </Form.Label>\r\n            <DatePicker\r\n                inputFormat=\"dd.MM.yyyy\"\r\n                mask=\"__.__.____\"\r\n                disabled={disabled}\r\n                readOnly={readonly}\r\n                value={value ? new Date(value) : null}\r\n                label={t(\"widgets.date_label\")}\r\n                onChange={value => onChange(value?.toJSON()?.slice(0, 10))}\r\n                ignoreInvalidInputs={true}\r\n                renderInput={(params) => <TextField {...params} hiddenLabel fullWidth size=\"small\"/>}\r\n            />\r\n        </Form.Group>\r\n        </LocalizationProvider>\r\n    );\r\n}\r\n\r\nexport default DateWidget;","// @ts-nocheck\r\nimport React from \"react\";\r\n\r\nimport {asNumber, guessType} from \"@rjsf/core/lib/utils\";\r\n\r\nconst nums = new Set([\"number\", \"integer\"]);\r\n\r\n/**\r\n * This is a silly limitation in the DOM where option change event values are\r\n * always retrieved as strings.\r\n */\r\nfunction processValue(schema, value) {\r\n    // \"enum\" is a reserved word, so only \"type\" and \"items\" can be destructured\r\n    const {type, items} = schema;\r\n    if (value === \"\") {\r\n        return undefined;\r\n    } else if (type === \"array\" && items && nums.has(items.type)) {\r\n        return value.map(asNumber);\r\n    } else if (type === \"boolean\") {\r\n        return value === \"true\";\r\n    } else if (type === \"number\") {\r\n        return asNumber(value);\r\n    }\r\n\r\n    // If type is undefined, but an enum is present, try and infer the type from\r\n    // the enum values\r\n    if (schema.enum) {\r\n        if (schema.enum.every(x => guessType(x) === \"number\")) {\r\n            return asNumber(value);\r\n        } else if (schema.enum.every(x => guessType(x) === \"boolean\")) {\r\n            return value === \"true\";\r\n        }\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\nfunction getValue(event, multiple) {\r\n    if (multiple) {\r\n        return [].slice\r\n            .call(event.target.options)\r\n            .filter(o => o.selected)\r\n            .map(o => o.value);\r\n    } else {\r\n        return event.target.value;\r\n    }\r\n}\r\n\r\nfunction SelectWidget(props) {\r\n    const {\r\n        schema,\r\n        id,\r\n        options,\r\n        value,\r\n        required,\r\n        disabled,\r\n        readonly,\r\n        multiple,\r\n        autofocus,\r\n        label,\r\n        onChange,\r\n        onBlur,\r\n        onFocus,\r\n        placeholder,\r\n    } = props;\r\n    const {enumOptions, enumDisabled} = options;\r\n    const emptyValue = multiple ? [] : \"\";\r\n    return (\r\n        <>\r\n            <label className=\"form-label\">{label || schema.title}\r\n                {(label || schema.title) && required ? \"*\" : null}\r\n            </label>\r\n            <select\r\n                id={id}\r\n                multiple={multiple}\r\n                className=\"form-control\"\r\n                value={typeof value === \"undefined\" ? emptyValue : value}\r\n                required={required}\r\n                disabled={disabled || readonly}\r\n                autoFocus={autofocus}\r\n                onBlur={\r\n                    onBlur &&\r\n                    (event => {\r\n                        const newValue = getValue(event, multiple);\r\n                        onBlur(id, processValue(schema, newValue));\r\n                    })\r\n                }\r\n                onFocus={\r\n                    onFocus &&\r\n                    (event => {\r\n                        const newValue = getValue(event, multiple);\r\n                        onFocus(id, processValue(schema, newValue));\r\n                    })\r\n                }\r\n                onChange={event => {\r\n                    const newValue = getValue(event, multiple);\r\n                    onChange(processValue(schema, newValue));\r\n                }}>\r\n                {!multiple && schema.default === undefined && (\r\n                    <option value=\"\">{placeholder}</option>\r\n                )}\r\n                {enumOptions.map(({value, label}, i) => {\r\n                    const disabled = enumDisabled && enumDisabled.indexOf(value) != -1;\r\n                    return (\r\n                        <option key={i} value={value} disabled={disabled}>\r\n                            {label}\r\n                        </option>\r\n                    );\r\n                })}\r\n            </select>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default SelectWidget;","import React from \"react\";\r\n\r\nimport Form from \"react-bootstrap/Form\";\r\n\r\nimport {FieldProps} from \"@rjsf/core\";\r\nimport {Box, Button, Typography} from \"@mui/material\";\r\n\r\nconst Counter = ({required, label, formData, schema, onChange, rawErrors = []}: FieldProps) => {\r\n\r\n    const _onChange = (action: \"add\" | \"remove\") => {\r\n        const _value = Array.isArray(formData) ? formData : [];\r\n        if (action === \"add\") {\r\n            const newValue = [..._value, new Date().toISOString()];\r\n            onChange(newValue);\r\n        } else if (action === \"remove\") {\r\n            const newValue = [..._value];\r\n            newValue.pop();\r\n            onChange(newValue);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Form.Group className=\"mb-0\">\r\n            <Form.Label className={rawErrors.length > 0 ? \"text-danger\" : \"\"}>\r\n                {label || schema.title}\r\n                {(label || schema.title) && required ? \"*\" : null}\r\n            </Form.Label>\r\n            <br/>\r\n            <Box>\r\n                <Typography align={\"center\"} variant={\"h2\"}>{Array.isArray(formData) ? formData.length : 0}</Typography>\r\n                <Box display={\"flex\"} alignItems={\"center\"}>\r\n                    <Box width={\"80%\"} pr={1}>\r\n                        <Button sx={{height: 110}} color={\"success\"} fullWidth variant={\"contained\"}\r\n                                onClick={() => _onChange(\"add\")}>+</Button>\r\n                    </Box>\r\n                    <Box width={\"20%\"}>\r\n                        <Button sx={{height: 110}} fullWidth variant={\"contained\"} color={\"warning\"}\r\n                                onClick={() => _onChange(\"remove\")}>-</Button>\r\n                    </Box>\r\n                </Box>\r\n            </Box>\r\n        </Form.Group>\r\n    );\r\n};\r\n\r\nexport default Counter;","import React from 'react';\r\nimport {\r\n    AudioWidget,\r\n    AutoCompleteWidget,\r\n    DateTimeWidget,\r\n    DateWidget,\r\n    FileWidget,\r\n    LinkWidget,\r\n    RadioWidget,\r\n    SelectWidget,\r\n    CounterWidget\r\n} from \"./custom-widgets\";\r\nimport JsonForm from \"@rjsf/bootstrap-4\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {FormProps} from \"@rjsf/core\"\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n\r\ninterface Props extends FormProps<any> {\r\n    schema: object,\r\n    uiSchema?: object,\r\n    formData?: any,\r\n    onChange?: (formData: object) => void,\r\n    onSubmit?: (formData: object) => void,\r\n    hideButton?: boolean,\r\n    disabled?: boolean\r\n}\r\n\r\nconst Form: React.FC<Props> = (props) => {\r\n    const {schema, uiSchema, formData, hideButton, onChange, onSubmit, children, disabled, ...rest} = props;\r\n    const {t} = useTranslation();\r\n\r\n    const widgets = {\r\n        customfile: FileWidget,\r\n        autocomplete: AutoCompleteWidget,\r\n        RadioWidget: RadioWidget,\r\n        customlink: LinkWidget,\r\n        audio: AudioWidget,\r\n        DateTimeWidget: DateTimeWidget,\r\n        DateWidget: DateWidget,\r\n        SelectWidget: SelectWidget,\r\n    };\r\n\r\n    const fields = {\r\n        counter: CounterWidget\r\n    }\r\n\r\n    const handleChange = (e: { formData: object }) => {\r\n        if (onChange) {\r\n            onChange(e.formData)\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (e: { formData: object }) => {\r\n        if (onSubmit) {\r\n            onSubmit(e.formData)\r\n        } else {\r\n            return 0\r\n        }\r\n    }\r\n\r\n    const renderButton = () => {\r\n        if (children) {\r\n            return children;\r\n        } else if (hideButton) {\r\n            return \" \"\r\n        } else {\r\n            return <button type=\"submit\" className=\"btn btn-primary\" disabled={disabled}>{t(\"submit\")}</button>\r\n        }\r\n    }\r\n\r\n    return (\r\n        <JsonForm\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={formData}\r\n            widgets={widgets}\r\n            fields={fields}\r\n            onChange={handleChange}\r\n            onSubmit={handleSubmit}\r\n            disabled={disabled}\r\n            {...rest}\r\n        >\r\n            {renderButton()}\r\n        </JsonForm>\r\n    );\r\n};\r\n\r\nexport default Form","import React from 'react';\r\nimport {Box, Button, Chip, Divider, Grid, Stack} from \"@mui/material\";\r\nimport Form from \"../../../../components/form/Form\";\r\nimport {TaskViews} from \"../Task.types\";\r\nimport {useAuth} from \"../../../../context/authentication/hooks/useAuth\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport ArrowCircleDownIcon from '@mui/icons-material/ArrowCircleDown';\r\n\r\nexport type Props = {\r\n    data: any,\r\n    formData?: any,\r\n    complete?: boolean,\r\n    view?: TaskViews,\r\n    disabled?: boolean,\r\n    previousTasks?: any[],\r\n    onChange: (formData: any) => void,\r\n    onSubmit: (formData: any) => void,\r\n    onRelease: () => void,\r\n    onPrevious: () => void,\r\n    hideSubmit?: boolean\r\n    onFocus?: (id: string, formData: any) => void\r\n};\r\n\r\nconst CommonView = (props: Props) => {\r\n    const {\r\n        data,\r\n        view,\r\n        complete,\r\n        previousTasks,\r\n        formData,\r\n        disabled,\r\n        hideSubmit,\r\n        onChange,\r\n        onSubmit,\r\n        onRelease,\r\n        onPrevious,\r\n        onFocus\r\n    } = props;\r\n    const {id: taskId, schema, uiSchema} = data;\r\n    const {id: stageId, allow_go_back, allow_release} = data.stage;\r\n    const {id: chainId, campaign: campaignId} = data.stage.chain;\r\n    const inactive = disabled || complete;\r\n\r\n    const {t} = useTranslation();\r\n    const {user} = useAuth();\r\n    const storagePath = user ? `${campaignId}/${chainId}/${stageId}/${user.uid}/${taskId}` : null;\r\n\r\n    const renderPreviousTasks = (tasks: any[] | undefined) => {\r\n        if (Array.isArray(tasks) && tasks.length > 0) {\r\n            return tasks.map((task: any, index) => {\r\n                    const {responses, schema, uiSchema} = task;\r\n                    return <Form\r\n                        key={`prev_task_${index}`}\r\n                        schema={schema}\r\n                        uiSchema={uiSchema}\r\n                        formData={responses}\r\n                        hideButton={true}\r\n                        disabled={true}\r\n                    />;\r\n                }\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    const renderButtons = () => (\r\n        <Stack spacing={1} py={1}>\r\n            <Button type={\"submit\"} variant={\"contained\"} hidden={hideSubmit}\r\n                    disabled={inactive}>{t(\"task.submit\")}</Button>\r\n            <Button hidden={!allow_go_back} variant={\"contained\"} color={\"secondary\"} disabled={inactive}\r\n                    onClick={onPrevious}>{t(\"task.open_previous\")}</Button>\r\n            <Button hidden={!allow_release} variant={\"contained\"} color={\"warning\"} disabled={inactive}\r\n                    onClick={onRelease}>{t(\"task.release\")}</Button>\r\n        </Stack>\r\n    )\r\n\r\n    const form = (\r\n        <Form\r\n            schema={schema}\r\n            uiSchema={uiSchema}\r\n            formData={formData}\r\n            onChange={onChange}\r\n            onSubmit={onSubmit}\r\n            onFocus={onFocus}\r\n            omitExtraData={true}\r\n            liveOmit={true}\r\n            formContext={{storagePath}}\r\n            disabled={inactive}>\r\n            {renderButtons()}\r\n        </Form>\r\n    )\r\n\r\n    if (view === \"split\" && Array.isArray(previousTasks) && previousTasks.length > 0) {\r\n        return (\r\n            <Grid container direction='row' spacing={1}>\r\n                <Grid container item sm={6} xs={12} sx={{display: 'block'}}>\r\n                    {renderPreviousTasks(previousTasks)}\r\n                </Grid>\r\n                <Grid container item sm={6} xs={12} sx={{display: 'block'}}>\r\n                    {form}\r\n                </Grid>\r\n            </Grid>\r\n        );\r\n    } else {\r\n        return (\r\n            <Box>\r\n                {renderPreviousTasks(previousTasks)}\r\n                <Divider hidden={previousTasks?.length === 0} sx={{py: 1}}>\r\n                    <Chip icon={<ArrowCircleDownIcon/>} color={\"primary\"} label={t(\"task.divider_text\")}/>\r\n                </Divider>\r\n                {form}\r\n            </Box>\r\n        );\r\n    }\r\n};\r\n\r\nexport default CommonView","import React from 'react';\r\nimport {Button, IconButton, Tooltip} from \"@mui/material\";\r\nimport CheckCircleIcon from \"@mui/icons-material/CheckCircle\";\r\nimport ExpandableCard from \"../../../../components/card/ExpandableCard\";\r\nimport CommonView from \"../common-task/CommonView\";\r\nimport {TaskViews} from \"../Task.types\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {\r\n    active: boolean,\r\n    data: any,\r\n    formData?: any,\r\n    complete?: boolean,\r\n    view?: TaskViews,\r\n    disabled?: boolean,\r\n    previousTasks?: any[],\r\n    onChange: (formData: any) => void,\r\n    onSubmit: (formData: any) => void,\r\n    onRelease: () => void,\r\n    onPrevious: () => void,\r\n    onOpen: () => void,\r\n    onRequest: () => void,\r\n    hideOpen?: boolean,\r\n    hideSubmit?: boolean,\r\n    onAction?: () => void\r\n};\r\n\r\nconst QuickView = (props: Props) => {\r\n    const {active, onRequest, onOpen, onAction, hideSubmit, hideOpen, ...rest} = props;\r\n    const cardData = {name: props.data.stage.name, id: props.data.id}\r\n\r\n    const {t} = useTranslation();\r\n\r\n    const requestButton = active ?\r\n        (\r\n            <Tooltip key={\"edit_button\"} title={t(\"accepted\") as string}>\r\n                <IconButton color={\"primary\"} size={\"small\"} onClick={onAction}>\r\n                    <CheckCircleIcon color={\"primary\"} fontSize={\"large\"}/>\r\n                </IconButton>\r\n            </Tooltip>\r\n        )\r\n        :\r\n        (\r\n            <Button key={\"edit_button\"} variant={\"contained\"} onClick={onRequest}>\r\n                {t('edit')}\r\n            </Button>\r\n        );\r\n\r\n    return (\r\n        <ExpandableCard data={cardData} extraActions={[requestButton]} hideOpenButton={hideOpen} onClick={onOpen}>\r\n            <CommonView {...rest} hideSubmit={hideSubmit} disabled={!active}/>\r\n        </ExpandableCard>\r\n    );\r\n};\r\n\r\nexport default QuickView","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {Box} from \"@mui/material\";\r\nimport {TaskProps} from \"../Task.types\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport QuickView from \"./QuickView\";\r\n\r\ntype Props = TaskProps & {\r\n    active?: boolean,\r\n    hideSubmit?: boolean,\r\n    hideOpen?: boolean,\r\n    onAction?: (id: number, action: \"add\" | \"remove\") => void\r\n}\r\n\r\nconst Quick = (props: Props) => {\r\n    const {\r\n        id,\r\n        view,\r\n        active: isActive,\r\n        hideSubmit,\r\n        hideOpen,\r\n        fullwidth,\r\n        disabled,\r\n        getData,\r\n        getPreviousData,\r\n        saveData,\r\n        releaseTask,\r\n        debouncedSave,\r\n        openPreviousTask,\r\n        handleRedirect,\r\n        handlePrompt,\r\n        openToast,\r\n        requestTask,\r\n        onAction,\r\n        updateState\r\n    } = props;\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [data, setData] = useState<any>();\r\n    const [formData, setFormData] = useState();\r\n    const [complete, setComplete] = useState(true);\r\n    const [previousTasks, setPreviousTasks] = useState([]);\r\n    const [active, setActive] = useState(isActive ?? false)\r\n\r\n    const mountData = useCallback(async (id) => {\r\n        setActive(false);\r\n        const data = await getData(id);\r\n        setData(data);\r\n        setFormData(data.responses ?? {});\r\n        setComplete(data.complete);\r\n        try {\r\n            const prev = await getPreviousData(id);\r\n            setPreviousTasks(prev)\r\n        } catch (error) {\r\n            setPreviousTasks([])\r\n            console.log(error);\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        mountData(id);\r\n    }, [mountData, id])\r\n\r\n    useEffect(() => {\r\n        if (typeof isActive === \"boolean\") {\r\n            setActive(isActive)\r\n        }\r\n    }, [isActive])\r\n\r\n\r\n    const handleRelease = () => {\r\n        releaseTask(id)\r\n            .then(() => setActive(false));\r\n    }\r\n\r\n    const handleOpenPrevious = () => {\r\n        openPreviousTask(id)\r\n            .then(res => {\r\n                const {id: prevId} = res;\r\n                handleRedirect(id, prevId, mountData);\r\n            })\r\n    };\r\n\r\n    const handleChange = (formData: any) => {\r\n        setFormData(formData);\r\n    }\r\n\r\n    const handleSubmit = (formData: any) => {\r\n        return saveData(id, {responses: formData, complete: true})\r\n            .then((res) => {\r\n                openToast(\"Данные сохранены\", \"success\");\r\n                setActive(false);\r\n                updateState()\r\n            })\r\n            .catch(err => openToast(err.message, \"error\"));\r\n    }\r\n\r\n    const handleRequest = () => {\r\n        if (onAction) {\r\n            onAction(id, \"add\")\r\n        } else {\r\n            requestTask(id)\r\n                .then((res) => mountData(res.id))\r\n                .then(() => setActive(true))\r\n        }\r\n    }\r\n\r\n    const handleOpen = () => {\r\n        if (active) {\r\n            navigate(`${id}`);\r\n        } else {\r\n            requestTask(id)\r\n                .then(res => {\r\n                    const {id} = res;\r\n                    navigate(`${id}`);\r\n                })\r\n        }\r\n    }\r\n\r\n    const handleAction = () => {\r\n        if (onAction) {\r\n            onAction(id, \"remove\")\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (active) {\r\n            debouncedSave(id, {responses: formData});\r\n        }\r\n    }, [formData, complete, debouncedSave, id])\r\n\r\n    const formProps = {\r\n        data,\r\n        formData,\r\n        complete,\r\n        previousTasks: previousTasks,\r\n        disabled,\r\n        onChange: handleChange,\r\n        onSubmit: handleSubmit,\r\n        onRelease: handleRelease,\r\n        onPrevious: handleOpenPrevious,\r\n        onOpen: handleOpen,\r\n        onRequest: handleRequest\r\n    }\r\n\r\n    if (!data) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            <QuickView active={active} hideOpen={hideOpen} onAction={handleAction} hideSubmit={hideSubmit}\r\n                       view={view} {...formProps}/>\r\n        </Box>\r\n    );\r\n\r\n};\r\n\r\nexport default Quick","import React from 'react';\r\nimport Box, {BoxProps} from \"@mui/material/Box\";\r\nimport {styled} from \"@mui/material/styles\";\r\n\r\nconst BuilderLayout = styled(Box)<BoxProps>(() => ({\r\n    width: '70%',\r\n    minWidth: '400px',\r\n    margin: '0 auto'\r\n}));\r\n\r\nexport default BuilderLayout","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {Box} from \"@mui/material\";\r\nimport BuilderLayout from \"../../../../components/layout/common-layouts/BuilderLayout\";\r\nimport {TaskProps} from \"../Task.types\";\r\nimport CommonView from \"./CommonView\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n\r\nconst Common = (props: TaskProps & { update?: boolean, forceUpdate?: (value: boolean) => void }) => {\r\n    const {\r\n        id,\r\n        view,\r\n        fullwidth,\r\n        disabled,\r\n        getData,\r\n        getPreviousData,\r\n        saveData,\r\n        releaseTask,\r\n        debouncedSave,\r\n        openPreviousTask,\r\n        handleRedirect,\r\n        handlePrompt,\r\n        openToast,\r\n        update,\r\n        getDynamicForm,\r\n        forceUpdate\r\n    } = props;\r\n\r\n    const navigate = useNavigate();\r\n    const {t} = useTranslation();\r\n\r\n    const [data, setData] = useState<any>();\r\n    const [formData, setFormData] = useState<any>();\r\n    const [complete, setComplete] = useState(true);\r\n    const [previousTasks, setPreviousTasks] = useState([]);\r\n    const [isDynamic, setDynamic] = useState(false);\r\n\r\n    const setDynamicForm = (data: any, formData: object) => {\r\n        let _jsonData;\r\n        try {\r\n            _jsonData = JSON.stringify(formData)\r\n        } catch (e) {\r\n            _jsonData = '{}';\r\n        }\r\n        getDynamicForm(data.stage.id, _jsonData).then(res => {\r\n            const {schema, ...rest} = data;\r\n            const dynamicSchema = res.schema;\r\n            setData({schema: dynamicSchema, ...rest})\r\n        })\r\n    }\r\n\r\n    const mountData = useCallback(async (id) => {\r\n        const data = await getData(id);\r\n        const prev = await getPreviousData(id);\r\n\r\n        console.log(data)\r\n        if (!data.complete && data.stage.hasOwnProperty(\"dynamic_jsons\")) {\r\n            setDynamic(true);\r\n            setDynamicForm(data, {});\r\n        }\r\n        setPreviousTasks(prev)\r\n        setData(data);\r\n        setFormData(data.responses ?? {});\r\n        setComplete(data.complete);\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        mountData(id);\r\n    }, [mountData, id])\r\n\r\n    useEffect(() => {\r\n        if (update && forceUpdate) {\r\n            mountData(id).then(() => forceUpdate(false))\r\n        }\r\n    }, [update])\r\n\r\n\r\n    const handleRelease = () => {\r\n        handlePrompt(false);\r\n        releaseTask(id)\r\n            .then(() => navigate('../..'));\r\n    }\r\n\r\n    const handleOpenPrevious = () => {\r\n        openPreviousTask(id)\r\n            .then(res => {\r\n                const {id: prevId} = res;\r\n                handleRedirect(id, prevId, mountData);\r\n            })\r\n    };\r\n\r\n    const handleChange = (formData: any) => {\r\n        setFormData(formData);\r\n    }\r\n\r\n    const handleSubmit = (formData: any) => {\r\n        return saveData(id, {responses: formData, complete: true})\r\n            .then((res) => {\r\n                handlePrompt(false);\r\n                openToast(t(\"task.saved_message\"), \"success\");\r\n                const {next_direct_id} = res;\r\n                handleRedirect(id, next_direct_id, mountData);\r\n            })\r\n            .catch(err => openToast(err.message, \"error\"));\r\n    }\r\n\r\n    const handleFocus = (id: string, value: any) => {\r\n        if (!data.complete && isDynamic) {\r\n            setDynamicForm(data, formData)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        debouncedSave(id, {responses: formData});\r\n        // Show Prompt if not complete\r\n        handlePrompt(!complete);\r\n    }, [formData, complete, debouncedSave, id])\r\n\r\n    const formProps = {\r\n        data,\r\n        formData,\r\n        complete,\r\n        previousTasks: previousTasks,\r\n        disabled,\r\n        onChange: handleChange,\r\n        onSubmit: handleSubmit,\r\n        onRelease: handleRelease,\r\n        onPrevious: handleOpenPrevious,\r\n        onFocus: handleFocus\r\n    }\r\n\r\n    if (!data) {\r\n        return null;\r\n    }\r\n\r\n    if (fullwidth) {\r\n        return (\r\n            <Box>\r\n                <CommonView view={view} {...formProps}/>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <BuilderLayout>\r\n            <CommonView view={view} {...formProps}/>\r\n        </BuilderLayout>\r\n    );\r\n};\r\n\r\nexport default Common","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {Box, Button, Chip, Divider, Grid} from \"@mui/material\";\r\nimport ArrowCircleDownIcon from \"@mui/icons-material/ArrowCircleDown\"\r\nimport Quick from \"../quick-task/Quick\";\r\nimport Common from \"../common-task/Common\";\r\nimport {TaskProps} from \"../Task.types\";\r\n\r\n\r\nconst Integrated = (props: TaskProps) => {\r\n    const {\r\n        id,\r\n        getIntegrated,\r\n        triggerWebhook\r\n    } = props;\r\n\r\n    const [integrations, setIntegrations] = useState([])\r\n    const [active, setActive] = useState<number[]>([])\r\n    const [update, setUpdate] = useState(false)\r\n\r\n    const mountData = useCallback(async (id) => {\r\n        const integrations = await getIntegrated(id);\r\n        setIntegrations(integrations);\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        mountData(id);\r\n    }, [mountData, id])\r\n\r\n    const handleActivate = (id: number, action: \"add\" | \"remove\") => {\r\n        if (action === \"add\") {\r\n            const newSet = Array.from(new Set([...active, id]));\r\n            setActive(newSet)\r\n        }\r\n        if (action === \"remove\") {\r\n            const copy: number[] = [...active]\r\n            const index = copy.indexOf(id);\r\n            if (index > -1) {\r\n                copy.splice(index, 1);\r\n                setActive(copy)\r\n            }\r\n        }\r\n    }\r\n\r\n    const forceUpdate = (value: boolean) => {\r\n        setUpdate(value)\r\n    }\r\n\r\n    const handleWebhook = () => {\r\n        triggerWebhook(id)\r\n            .then(() => setUpdate(true))\r\n    }\r\n\r\n    return (\r\n        <Box>\r\n            <Grid container spacing={2}>\r\n                {integrations.map((item: any, index: number) =>\r\n                    (\r\n                        <Grid item key={index} width={\"100%\"}>\r\n                            <Quick {...props} onAction={handleActivate} hideSubmit={true} active={active.includes(item.id)} id={item.id}/>\r\n                        </Grid>\r\n                    )\r\n                )}\r\n            </Grid>\r\n            <Box pt={2}>\r\n                <Button fullWidth color={\"warning\"} variant={\"contained\"} onClick={handleWebhook}>Сгенерировать форму</Button>\r\n            </Box>\r\n            <Divider sx={{py: 2}}>\r\n                <Chip icon={<ArrowCircleDownIcon/>} label=\"Обобщающая форма\"/>\r\n            </Divider>\r\n            <Common fullwidth={true} update={update} forceUpdate={forceUpdate} {...props} />\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Integrated","import type {Blocker, History, Transition} from 'history';\r\nimport {ContextType, useCallback, useContext, useEffect} from 'react';\r\nimport {Navigator as BaseNavigator, UNSAFE_NavigationContext as NavigationContext} from 'react-router-dom';\r\n\r\ninterface Navigator extends BaseNavigator {\r\n    block: History['block'];\r\n}\r\n\r\ntype NavigationContextWithBlock = ContextType<typeof NavigationContext> & { navigator: Navigator };\r\n\r\n/**\r\n * @source https://github.com/remix-run/react-router/commit/256cad70d3fd4500b1abcfea66f3ee622fb90874\r\n */\r\nexport function useBlocker(blocker: Blocker, when = true) {\r\n    const {navigator} = useContext(NavigationContext) as NavigationContextWithBlock;\r\n\r\n    useEffect(() => {\r\n        if (!when) {\r\n            return;\r\n        }\r\n\r\n        const unblock = navigator.block((tx: Transition) => {\r\n            const autoUnblockingTx = {\r\n                ...tx,\r\n                retry() {\r\n                    unblock();\r\n                    setTimeout(() => tx.retry(), 100);\r\n                },\r\n            };\r\n\r\n            blocker(autoUnblockingTx);\r\n        });\r\n\r\n        return unblock;\r\n    }, [navigator, blocker, when]);\r\n}\r\n\r\n/**\r\n * @source https://github.com/remix-run/react-router/issues/8139#issuecomment-1021457943\r\n */\r\nexport function usePrompt(message: string | ((\r\n    location: Transition['location'],\r\n    action: Transition['action'],\r\n) => string), when = true) {\r\n    const blocker = useCallback((tx: Transition) => {\r\n        let response;\r\n        if (typeof message === 'function') {\r\n            response = message(tx.location, tx.action);\r\n            if (typeof response === 'string') {\r\n                response = window.confirm(response);\r\n            }\r\n        } else {\r\n            response = window.confirm(message);\r\n        }\r\n        if (response) {\r\n            tx.retry();\r\n        }\r\n    }, [message]);\r\n    return useBlocker(blocker, when);\r\n}","import React from 'react';\r\nimport {Editor} from \"@tinymce/tinymce-react\";\r\nimport {Box} from '@mui/material';\r\n\r\ntype Props = {\r\n    data?: string\r\n    hidden?: boolean\r\n};\r\n\r\nconst TextViewer = (props: Props) => {\r\n    const {data, hidden} = props;\r\n\r\n    return (\r\n        <Box hidden={hidden}>\r\n            <Editor\r\n                id={\"ViewerTinyMCE\"}\r\n                value={data}\r\n                inline={false}\r\n                disabled={true}\r\n                tinymceScriptSrc={process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'}\r\n                init={{\r\n                    plugins: 'autoresize',\r\n                    toolbar: false,\r\n                    menubar: false,\r\n                    image_advtab: true,\r\n                    importcss_append: true,\r\n                }}\r\n            />\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default TextViewer","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport useAxios from \"../../../services/api/useAxios\";\r\nimport useHelpers from \"../../../utils/hooks/UseHelpers\";\r\nimport Integrated from \"./integrated-task/Integrated\";\r\nimport Common from \"./common-task/Common\";\r\nimport debounce from 'lodash.debounce'\r\nimport {useToast} from \"../../../context/toast/hooks/useToast\";\r\nimport {usePrompt} from \"../../../components/prompt/Prompt\";\r\nimport {TaskViews} from \"./Task.types\";\r\nimport Quick from \"./quick-task/Quick\";\r\nimport {Alert, Box} from \"@mui/material\";\r\nimport TextViewer from \"../../../components/text-editor/TextViewer\";\r\nimport AssignmentReturnIcon from '@mui/icons-material/AssignmentReturn';\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {\r\n    variant?: \"quick\" | \"integrated\" | \"common\",\r\n    id?: number,\r\n    view?: TaskViews,\r\n    fullWidth?: boolean,\r\n    hidePrompt?: boolean,\r\n    active?: boolean,\r\n    updateState?: Function\r\n}\r\n\r\n\r\nconst Task = (props: Props) => {\r\n    const {variant, id, view, updateState: updateData, active: isActive, hidePrompt, fullWidth} = props;\r\n\r\n    const {t} = useTranslation();\r\n    const {taskId} = useParams();\r\n    const {\r\n        getTask,\r\n        saveTask,\r\n        getPreviousTasks,\r\n        releaseTask,\r\n        openPreviousTask,\r\n        requestTaskAssignment,\r\n        getIntegratedData,\r\n        triggerTaskWebhook,\r\n        getDynamicSchema\r\n    } = useAxios();\r\n\r\n    const {openToast} = useToast();\r\n    const navigate = useNavigate();\r\n    const {parseId, parseTaskData} = useHelpers();\r\n\r\n    const parsedId = id ? id : parseId(taskId);\r\n    const DEBOUNCE_SAVE_DELAY_MS = 2000;\r\n\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n    const [data, setData] = useState<any>();\r\n\r\n    usePrompt(t(\"task.leave_page\"), hidePrompt ? false : showPrompt);\r\n\r\n    const getData = useCallback((id) => {\r\n        return getTask(id)\r\n            .then(res => ({...res, ...parseTaskData(res)}));\r\n    }, [])\r\n\r\n    const getPreviousData = useCallback((id) => {\r\n        return getPreviousTasks(id)\r\n            .then(res => res.map((task: any) => parseTaskData(task)));\r\n    }, [])\r\n\r\n    const getIntegrated = useCallback((id) => {\r\n        return getIntegratedData(id)\r\n    }, [])\r\n\r\n    const releaseUserTask = useCallback((id) => {\r\n        return releaseTask(id)\r\n    }, [])\r\n\r\n    const openPrevious = useCallback((id) => {\r\n        return openPreviousTask(id)\r\n    }, [])\r\n\r\n    const requestTask = useCallback((id) => {\r\n        return requestTaskAssignment(id)\r\n    }, [])\r\n\r\n    const triggerWebhook = useCallback((id) => {\r\n        return triggerTaskWebhook(id)\r\n    }, [])\r\n\r\n    const saveData = useCallback((id: number, data: { responses: any, complete?: boolean }) => {\r\n        return saveTask(id, data);\r\n    }, [])\r\n\r\n    const debouncedSave = useCallback(debounce((id: number, data) => {\r\n        return saveData(id, data)\r\n    }, DEBOUNCE_SAVE_DELAY_MS), []);\r\n\r\n    const handleRedirect = useCallback((id: number, next_direct_id: number, callback: Function) => {\r\n        if (next_direct_id) {\r\n            if (next_direct_id === id) {\r\n                // Refresh data if it is the same task\r\n                callback(id);\r\n            } else {\r\n                // Go to next task\r\n                navigate(`../../${next_direct_id}`);\r\n            }\r\n        } else {\r\n            navigate('../..');\r\n        }\r\n    }, [])\r\n\r\n    const handlePrompt = useCallback((value: boolean) => {\r\n        setShowPrompt(value)\r\n    }, [])\r\n\r\n    const updateState = useCallback((id) => {\r\n        return getData(id).then(res => setData(res))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        updateState(parsedId)\r\n            .then(() => {\r\n                if (variant !== \"quick\") {\r\n                    window.scrollTo(0, 0);\r\n                }\r\n            });\r\n    }, [parsedId])\r\n\r\n    const getDynamicForm = useCallback((id: number, formData: any) => {\r\n        return getDynamicSchema(id, formData);\r\n    }, [])\r\n\r\n    const taskMethods = {\r\n        getData,\r\n        getPreviousData,\r\n        getIntegrated,\r\n        releaseTask: releaseUserTask,\r\n        requestTask,\r\n        triggerWebhook,\r\n        saveData,\r\n        debouncedSave,\r\n        openPreviousTask: openPrevious,\r\n        handleRedirect,\r\n        handlePrompt,\r\n        getDynamicForm,\r\n        openToast,\r\n        updateState: updateData ?? updateState\r\n    }\r\n\r\n\r\n    if (variant === \"quick\") {\r\n        return (\r\n            <Box>\r\n                <Quick id={parsedId} view={view} fullwidth={fullWidth} {...taskMethods}/>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    if (variant === \"integrated\" || data?.integrator_group) {\r\n        return (\r\n            <Box p={2}>\r\n                <Integrated id={parsedId} {...taskMethods}/>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Box p={2}>\r\n            <Alert icon={<AssignmentReturnIcon fontSize=\"inherit\"/>} hidden={!(data && data.reopened)} sx={{mb: 2}}\r\n                   severity=\"error\">\r\n                {t('task.returned_message')}\r\n            </Alert>\r\n            <TextViewer data={data?.stage?.rich_text} hidden={!data?.stage?.rich_text}/>\r\n            <Common id={parsedId} view={view} fullwidth={true} {...taskMethods}/>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Task","import React, {useEffect, useState} from \"react\";\nimport {Box, Button, FormControl, FormGroup, InputLabel, MenuItem, Select, SelectChangeEvent,} from \"@mui/material\";\nimport useAxios from \"../../services/api/useAxios\";\nimport {taskstagesUrl} from \"../../services/api/Urls\";\nimport Form from \"../../components/form/Form\";\nimport useHelpers from \"../../utils/hooks/UseHelpers\";\nimport {useTranslation} from \"react-i18next\";\n\nconst OPERATORS = [\"==\", \"!=\", \"<\", \">\", \"<=\", \">=\", \"in\"];\nconst TYPES = [\"string\", \"int\", \"datetime\"]\n\nconst TaskFilter = (props: { campaign: number, onFilter: (filter: string) => void }) => {\n    const {campaign, onFilter} = props;\n\n    const {axios, getChains, getTaskFields} = useAxios();\n    const {parseId} = useHelpers();\n    const {t} = useTranslation();\n\n    const [chainId, setChainId] = useState(\"\")\n    const [searchStageId, setSearchStageId] = useState(\"\")\n    const [formStageId, setFormStageId] = useState(\"\")\n    const [chains, setChains] = useState([])\n    const [stages, setStages] = useState([])\n    const [jsonSchema, setJsonSchema] = useState<any>({})\n    const [uiSchema, setUiSchema] = useState({})\n    const [formResponses, setFormResponses] = useState({})\n\n    useEffect(() => {\n        getChains(campaign)\n            .then(res => setChains(res))\n            .then(() => {\n                if (!chainId) {\n                    const savedChain = localStorage.getItem(\"selectable_filter_chain\");\n                    if (savedChain) {\n                        setChainId(savedChain)\n                    }\n                }\n            })\n    }, [campaign])\n\n    useEffect(() => {\n        if (chainId && chains.length > 0) {\n            axios.get(`${taskstagesUrl}?chain=${chainId}&chain__campaign=${campaign}&limit=100`)\n                .then(res => res.data)\n                .then(res => setStages(res.results))\n                .then(() => {\n                    if (!formStageId) {\n                        const savedFormStage = localStorage.getItem(\"selectable_filter_form_stage\");\n                        if (savedFormStage) {\n                            setFormStageId(savedFormStage)\n                        }\n                    }\n                })\n        }\n    }, [chainId])\n\n    const createSchema = (fields: string[]) => {\n        return {\n            title: t(\"filter.filter_label\"),\n            type: \"array\",\n            items: {\n                type: \"object\",\n                required: [\"field\", \"type\"],\n                properties: {\n                    field: {\n                        type: \"string\",\n                        title: t(\"filter.field_label\"),\n                        enum: [...fields]\n                    },\n                    type: {\n                        type: \"string\",\n                        title: t(\"filter.type_label\"),\n                        enum: TYPES,\n                        enumNames: t(\"filter.types\", {returnObjects: true})\n                    },\n                    conditions: {\n                        type: \"array\",\n                        title: t(\"filter.conditions_label\"),\n                        items: {\n                            type: \"object\",\n                            properties: {\n                                operator: {\n                                    title: t(\"filter.operator_label\"),\n                                    type: \"string\",\n                                    enum: OPERATORS,\n                                    enumNames: t(\"filter.operators\", {returnObjects: true})\n                                },\n                                value: {\n                                    title: t(\"filter.value_label\"),\n                                    description: t(\"filter.value_description\"),\n                                    type: \"string\"\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        };\n    }\n\n    useEffect(() => {\n        if (formStageId) {\n            const parsedStageId = parseId(formStageId)\n            const savedResponses = localStorage.getItem(\"selectable_filter_responses\");\n            if (savedResponses) {\n                setFormResponses(JSON.parse(savedResponses))\n            }\n            getTaskFields(parsedStageId).then(res => {\n                const fields = res.fields;\n                console.log(fields)\n                const _schema: any = createSchema(fields)\n                setJsonSchema(_schema)\n            })\n        }\n    }, [formStageId])\n\n\n    const handleChainChange = (event: SelectChangeEvent) => {\n        setChainId(event.target.value);\n        setSearchStageId(\"\")\n        setFormStageId(\"\");\n        setFormResponses({})\n        setJsonSchema({})\n        setUiSchema({})\n        localStorage.setItem(\"selectable_filter_chain\", event.target.value);\n        localStorage.setItem(\"selectable_filter_form_stage\", \"\");\n        localStorage.setItem(\"selectable_filter_responses\", JSON.stringify({}));\n        localStorage.setItem(\"selectable_filter_stage\", \"\");\n    };\n\n     const handleStageChange = (event: SelectChangeEvent) => {\n        setSearchStageId(event.target.value)\n        localStorage.setItem(\"selectable_filter_stage\", event.target.value);\n    }\n\n    const handleFormStageChange = (event: SelectChangeEvent) => {\n        setFormStageId(event.target.value);\n        setFormResponses({})\n        setJsonSchema({})\n        setUiSchema({})\n        localStorage.setItem(\"selectable_filter_form_stage\", event.target.value);\n        localStorage.setItem(\"selectable_filter_responses\", JSON.stringify({}));\n    };\n\n    const handleFormChange = (formData: object) => {\n        setFormResponses(formData)\n        localStorage.setItem(\"selectable_filter_responses\", JSON.stringify(formData));\n    }\n\n    const handleFormSubmit = () => {\n        const parsedFormStageId = formStageId ? parseId(formStageId) : null;\n        const parsedSearchStageId = searchStageId ? parseId(searchStageId) : null;\n        const query = {all_conditions: formResponses, stage: parsedFormStageId, search_stage: parsedSearchStageId};\n        const queryString = JSON.stringify(query)\n        console.log(query)\n        console.log(queryString)\n        onFilter(queryString)\n    };\n\n    return (\n        <FormGroup>\n            {chains.length > 0 && <FormControl sx={{m: 1, minWidth: 120}}>\n                <InputLabel id=\"select-chain-filter\">{t(\"filter.chain_label\")}</InputLabel>\n                <Select\n                    labelId=\"select-chain-label\"\n                    id=\"select-chain\"\n                    value={chainId}\n                    label={t(\"filter.chain_label\")}\n                    onChange={handleChainChange}\n                >\n                    <MenuItem value=\"\">\n                        <em>None</em>\n                    </MenuItem>\n                    {chains.map((item: any) => <MenuItem key={`filter_chain_${item.id}`}\n                                                         value={item.id}>{item.name}</MenuItem>)}\n                </Select>\n            </FormControl>}\n            <FormControl disabled={chainId === \"\"} sx={{m: 1, minWidth: 120}}>\n                <InputLabel id=\"select-stage-filter\">{t(\"filter.search_stage_label\")}</InputLabel>\n                <Select\n                    labelId=\"select-stage-label\"\n                    id=\"search-stage\"\n                    value={searchStageId}\n                    label={t(\"filter.search_stage_label\")}\n                    onChange={handleStageChange}\n                >\n                    <MenuItem value=\"\">\n                        <em>None</em>\n                    </MenuItem>\n                    {stages.map((item: any) => <MenuItem key={`filter_stage_${item.id}`}\n                                                         value={item.id}>{item.name}</MenuItem>)}\n                </Select>\n            </FormControl>\n            <FormControl disabled={chainId === \"\"} sx={{m: 1, minWidth: 120}}>\n                <InputLabel id=\"select-form-stage-filter\">{t(\"filter.stage_label\")}</InputLabel>\n                <Select\n                    labelId=\"select-stage-label\"\n                    id=\"select-stage\"\n                    value={formStageId}\n                    label={t(\"filter.stage_label\")}\n                    onChange={handleFormStageChange}\n                >\n                    <MenuItem value=\"\">\n                        <em>None</em>\n                    </MenuItem>\n                    {stages.map((item: any) => <MenuItem key={`filter_form_stage_${item.id}`}\n                                                         value={item.id}>{item.name}</MenuItem>)}\n                </Select>\n            </FormControl>\n            <Box sx={{m: 1, minWidth: 120}}>\n                <Form\n                    schema={jsonSchema}\n                    uiSchema={uiSchema}\n                    formData={formResponses}\n                    hideButton={true}\n                    onChange={handleFormChange}\n                    onSubmit={handleFormSubmit}\n                >\n                     <Button fullWidth type={\"submit\"} sx={{mx: 1, mb: 2}} variant={\"contained\"}>{t(\"filter.search_button\")}</Button>\n                </Form>\n            </Box>\n\n        </FormGroup>\n    );\n};\n\nexport default TaskFilter","import React, {useEffect, useState} from 'react';\nimport {Box, Card, CardContent, Grid, Pagination, Tab, Typography, useMediaQuery} from \"@mui/material\";\nimport {useNavigate, useParams} from \"react-router-dom\";\nimport useAxios from \"../../services/api/useAxios\";\nimport useHelpers from \"../../utils/hooks/UseHelpers\";\nimport {TabContext, TabList, TabPanel} from \"@mui/lab\";\nimport {useTranslation} from \"react-i18next\";\n\n\nconst Notifications = ({importance, onlyNew}: { importance?: number, onlyNew?: boolean }) => {\n    const [viewedNotifications, setViewedNotifications] = useState<any[]>([]);\n    const [notViewedNotifications, setNotViewedNotifications] = useState<any[]>([]);\n    const [totalPages, setTotalPages] = useState(0)\n    const [page, setPage] = React.useState(1);\n    const [tab, setTab] = useState(\"1\");\n\n    const matches = useMediaQuery('(min-width:600px)');\n    const navigate = useNavigate();\n    const {campaignId} = useParams();\n    const {parseId, formatDateString} = useHelpers();\n    const parsedCampaignId = parseId(campaignId);\n    const {getUserNotifications} = useAxios();\n    const {t} = useTranslation();\n\n    useEffect(() => {\n        if (tab === \"1\") {\n            getUserNotifications(parsedCampaignId, false, importance).then(res => {\n                setTotalPages(Math.ceil(res.count / 10));\n                setNotViewedNotifications(res.results);\n            })\n        } else if (tab === \"2\") {\n            getUserNotifications(parsedCampaignId, true, importance).then(res => {\n                setTotalPages(Math.ceil(res.count / 10));\n                setViewedNotifications(res.results);\n            })\n        }\n        setPage(1);\n    }, [tab])\n\n    const handlePageChange = (event: React.ChangeEvent<unknown>, value: number) => {\n        setPage(value);\n        console.log(tab)\n        if (value) {\n            if (tab === \"1\") {\n                getUserNotifications(parsedCampaignId, false, importance, value).then(res => {\n                    setTotalPages(Math.ceil(res.count / 10));\n                    setNotViewedNotifications(res.results);\n                })\n            } else if (tab === \"2\") {\n                getUserNotifications(parsedCampaignId, true, importance, value).then(res => {\n                    setTotalPages(Math.ceil(res.count / 10));\n                    setViewedNotifications(res.results);\n                })\n            }\n        }\n    };\n\n    const handleTabChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n        setTab(newValue);\n    };\n\n    const openMessage = (id: number) => {\n        navigate(`/campaign/${campaignId}/notifications/${id}`)\n    }\n\n    if (onlyNew) {\n        return (\n            <Box>\n                {notViewedNotifications.map(message =>\n                    <Grid container justifyContent=\"center\" key={message.id} p={1}>\n                        <Card onClick={() => openMessage(message.id)}\n                              sx={{width: matches ? 700 : 300, background: 'lightblue', cursor: \"pointer\"}}>\n                            <CardContent>\n                                <Typography variant=\"h6\">\n                                    {message.title}\n                                </Typography>\n                                <Typography variant=\"body2\" component=\"p\">\n                                    {formatDateString(message.created_at)}\n                                </Typography>\n                            </CardContent>\n                        </Card>\n                    </Grid>\n                )}\n            </Box>\n        );\n    } else {\n        return (\n            <Box>\n                <Typography align={\"center\"} variant={\"h5\"} p={2}>{t(\"notifications.title\")}</Typography>\n                <Box sx={{width: '100%', typography: 'body1'}}>\n                    <TabContext value={tab}>\n                        <Box sx={{borderBottom: 1, borderColor: 'divider'}}>\n                            <TabList onChange={handleTabChange} aria-label=\"lab API tabs example\" centered variant={\"fullWidth\"}>\n                                <Tab label={t(\"notifications.unread\")} value=\"1\"/>\n                                <Tab label={t(\"notifications.read\")} value=\"2\"/>\n                            </TabList>\n                        </Box>\n                        <TabPanel value=\"1\">\n                            {notViewedNotifications.map(message =>\n                                <Grid container justifyContent=\"center\" key={message.id} p={1}>\n                                    <Card onClick={() => openMessage(message.id)}\n                                          sx={{width: matches ? 700 : 300, background: 'lightblue', cursor: \"pointer\"}}>\n                                        <CardContent>\n                                            <Typography variant=\"h6\">\n                                                {message.title}\n                                            </Typography>\n                                            <Typography variant=\"body2\" component=\"p\">\n                                                {formatDateString(message.created_at)}\n                                            </Typography>\n                                        </CardContent>\n                                    </Card>\n                                </Grid>\n                            )}\n                        </TabPanel>\n                        <TabPanel value=\"2\">\n                            {viewedNotifications.map(message =>\n                                <Grid container justifyContent=\"center\" key={message.id} p={1}>\n                                    <Card onClick={() => openMessage(message.id)}\n                                          sx={{width: matches ? 700 : 300, background: 'lightblue', cursor: \"pointer\"}}>\n                                        <CardContent>\n                                            <Typography variant=\"h6\">\n                                                {message.title}\n                                            </Typography>\n                                            <Typography variant=\"body2\" component=\"p\">\n                                                {formatDateString(message.created_at)}\n                                            </Typography>\n                                        </CardContent>\n                                    </Card>\n                                </Grid>\n                            )}\n                        </TabPanel>\n                    </TabContext>\n                    {totalPages > 1 && <Box p={2} display={\"flex\"} justifyContent={\"center\"}>\n                        <Pagination count={totalPages} page={page} onChange={handlePageChange} showFirstButton\n                                    showLastButton/>\n                    </Box>}\n                </Box>\n            </Box>\n        );\n    }\n};\n\nexport default Notifications","import React from 'react';\r\nimport {Button, CardActions, CardContent, Typography} from '@mui/material'\r\nimport MuiCard from '@mui/material/Card';\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {\r\n    name: string,\r\n    description: string,\r\n    id: number,\r\n    reopened: boolean,\r\n    onClick: (id: number) => void;\r\n};\r\n// TODO: Merge TaskCard with Card\r\nconst TaskCard = (props: Props) => {\r\n    const {name, description, id, reopened, onClick} = props;\r\n\r\n    const {t} = useTranslation();\r\n\r\n    const handleClick = () => {\r\n        onClick(id)\r\n    }\r\n\r\n    return (\r\n        <MuiCard>\r\n            <CardContent sx={{pb: 1}}>\r\n                <Typography variant=\"h5\" component=\"div\">\r\n                    {name}\r\n                </Typography>\r\n                <Typography gutterBottom variant={\"caption\"} color=\"text.secondary\">ID: {id}</Typography>\r\n                <Typography overflow={\"hidden\"} textOverflow={\"ellipsis\"} variant=\"body2\"\r\n                            sx={{height: 60, maxWidth: 500}}>\r\n                    {description}\r\n                </Typography>\r\n            </CardContent>\r\n            <CardActions sx={{justifyContent: \"space-between\"}}>\r\n                <Button size=\"small\" onClick={handleClick}>{t(\"open\")}</Button>\r\n                <Typography color={\"error\"} hidden={!reopened}>{t('returned')}</Typography>\r\n            </CardActions>\r\n        </MuiCard>\r\n    );\r\n};\r\n\r\nexport default TaskCard","import React, {useCallback, useEffect, useState} from 'react';\r\nimport {Box, Grid, Pagination, Tab, Typography} from \"@mui/material\";\r\nimport List from \"../../components/list/List\";\r\nimport useAxios from \"../../services/api/useAxios\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport useHelpers from \"../../utils/hooks/UseHelpers\";\r\nimport Task from \"./task/Task\";\r\nimport {TabContext, TabList, TabPanel} from \"@mui/lab\";\r\nimport TaskFilter from \"./TaskFilter\";\r\nimport Notifications from '../notifications/Notifications';\r\nimport {useTranslation} from \"react-i18next\";\r\nimport Card from \"../../components/card/Card\";\r\nimport TaskCard from \"../../components/card/TaskCard\";\r\n\r\nconst Tasks = () => {\r\n    const {\r\n        getOpenTasks,\r\n        getCompleteTasks,\r\n        getCreatableTasks,\r\n        requestTaskCreation,\r\n        getSelectableTasks,\r\n    } = useAxios();\r\n\r\n    const navigate = useNavigate();\r\n    const {campaignId} = useParams();\r\n    const {parseId} = useHelpers();\r\n    const parsedCampaignId = parseId(campaignId);\r\n    const {t} = useTranslation();\r\n\r\n    const [openTasks, setOpenTasks] = useState([]);\r\n    const [completedTasks, setCompletedTasks] = useState([]);\r\n    const [creatableTasks, setCreatableTasks] = useState([]);\r\n    const [selectableTasks, setSelectableTasks] = useState<any>([]);\r\n    const [tab, setTab] = useState(\"1\");\r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n    const [filterFormData, setFilterFormData] = useState<any>();\r\n\r\n    const handleTabChange = (event: React.SyntheticEvent, newValue: string) => {\r\n        setTab(newValue);\r\n        setFilterFormData(null);\r\n    };\r\n\r\n    const handleOpen = (id: number) => {\r\n        navigate(`/campaign/${campaignId}/tasks/${id}`)\r\n    }\r\n\r\n    const handleCreate = (id: number) => {\r\n        requestTaskCreation(id).then((res) => handleOpen(res.id))\r\n    }\r\n\r\n    const formatData = (data: any[]) => {\r\n        return data.map((item: { id: number, reopened?: boolean, stage: { name: string, description: string } }) => ({\r\n            id: item.id,\r\n            name: item.stage.name,\r\n            description: item.stage.description,\r\n            reopened: item.reopened ? item.reopened : false\r\n        })) as any;\r\n    }\r\n\r\n    const getSelectable = (campaign: number, page?: number, filter?: string) => {\r\n        return getSelectableTasks(campaign, page, filter).then(res => {\r\n            setTotalPages(Math.ceil(res.count / 10))\r\n            return res.results;\r\n        })\r\n    };\r\n\r\n    const getData = (id: number, tab: string, page?: number, filter?: string) => {\r\n        if (tab === \"1\") {\r\n            getOpenTasks(id).then(res => setOpenTasks(res));\r\n        } else if (tab === \"2\") {\r\n            getCompleteTasks(id).then(res => setCompletedTasks(res));\r\n        } else if (tab === \"3\") {\r\n            getSelectable(id, page, filter).then(res => setSelectableTasks(res));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getData(parsedCampaignId, tab, page, filterFormData);\r\n\r\n        // getSelectable()\r\n        //     .then(res => setSelectableTasks(res));\r\n    }, [tab, page])\r\n\r\n    useEffect(() => {\r\n        getCreatableTasks(parsedCampaignId)\r\n            .then(res => setCreatableTasks(res));\r\n    }, [])\r\n\r\n    const handlePageChange = (event: React.ChangeEvent<unknown>, value: number) => {\r\n        setPage(value);\r\n    };\r\n\r\n    const getFilteredData = (filter: string) => {\r\n        getSelectableTasks(parsedCampaignId, 1, filter).then(res => {\r\n            if (res.count > 0) {\r\n                setFilterFormData(filter)\r\n                setPage(1)\r\n                setTotalPages(Math.ceil(res.count / 10))\r\n                setSelectableTasks(res.results)\r\n            } else {\r\n                setFilterFormData(null)\r\n                alert(\"Нет похожих тасков\")\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Box px={1}>\r\n            <Notifications importance={0} onlyNew={true}/>\r\n            <List id={\"creatable_tasks\"} data={creatableTasks} onSelect={handleCreate} hideViewButton={true}\r\n                  hideCreateButton={true}/>\r\n            <TabContext value={tab}>\r\n                <Box sx={{borderBottom: 1, borderColor: 'divider'}}>\r\n                    <TabList onChange={handleTabChange} aria-label=\"lab API tabs example\" variant=\"fullWidth\">\r\n                        <Tab label={t(\"tasks.uncompleted\")} value=\"1\"/>\r\n                        <Tab label={t(\"tasks.completed\")} value=\"2\"/>\r\n                        <Tab label={t(\"tasks.available\")} value=\"3\"/>\r\n                    </TabList>\r\n                </Box>\r\n                <TabPanel value=\"1\" sx={{padding: 1}}>\r\n                    {/*<List id={\"open_tasks\"} data={openTasks} onSelect={handleOpen} hideCreateButton={true}/>*/}\r\n                    <Grid container py={2} spacing={{xs: 2, md: 3}} columns={{xs: 4, sm: 8, md: 12}}>\r\n                        {openTasks.length > 0 && openTasks.map((item: any, index) =>\r\n                            <Grid item xs={2} sm={4} md={4} key={index}>\r\n                                <TaskCard onClick={handleOpen} id={item.id} name={item.stage.name}\r\n                                          description={item.stage.description} reopened={item.reopened}/>\r\n                            </Grid>\r\n                        )}\r\n                    </Grid>\r\n                </TabPanel>\r\n                <TabPanel value=\"2\" sx={{padding: 1}}>\r\n                    {/*<List id={\"complete_tasks\"} data={completedTasks} onSelect={handleOpen} hideCreateButton={true}/>*/}\r\n                    <Grid container py={2} spacing={{xs: 2, md: 3}} columns={{xs: 4, sm: 8, md: 12}}>\r\n                        {completedTasks.length > 0 && completedTasks.map((item: any, index) =>\r\n                            <Grid item xs={2} sm={4} md={4} key={index}>\r\n                                <TaskCard onClick={handleOpen} id={item.id} name={item.stage.name}\r\n                                          description={item.stage.description} reopened={item.reopened}/>\r\n                            </Grid>\r\n                        )}\r\n                    </Grid>\r\n                    {/*<Box pb={2} display={\"flex\"} justifyContent={\"center\"}>*/}\r\n                    {/*    <Pagination count={totalPages} page={page} onChange={handlePageChange} showFirstButton*/}\r\n                    {/*                showLastButton/>*/}\r\n                    {/*</Box>*/}\r\n                </TabPanel>\r\n                <TabPanel value=\"3\" sx={{padding: 1}}>\r\n                    <TaskFilter onFilter={getFilteredData} campaign={parsedCampaignId}/>\r\n                    <Grid container py={2} spacing={2}>\r\n                        {selectableTasks.length > 0 ? selectableTasks.map((item: any, index: number) =>\r\n                            <Grid item xs={12} key={index}>\r\n                                <Task id={item.id} view={\"split\"} updateState={() => getData(parsedCampaignId, tab)}\r\n                                      hidePrompt={true}\r\n                                      variant={\"quick\"}/>\r\n                            </Grid>\r\n                        )\r\n                            :\r\n                            <Typography align={\"center\"}>Нет доступных заданий.</Typography>\r\n                        }\r\n                    </Grid>\r\n                    {/*<Grid container py={2} spacing={{xs: 2, md: 3}} columns={{xs: 4, sm: 8, md: 12}}>*/}\r\n                    {/*    {selectableTasks.length > 0 && selectableTasks.map((item: any, index: number) =>*/}\r\n                    {/*        <Grid item xs={2} sm={4} md={4} key={index}>*/}\r\n                    {/*            <TaskCard onClick={handleOpen} id={item.id} name={item.stage.name}*/}\r\n                    {/*                      description={item.stage.description} reopened={item.reopened}/>*/}\r\n                    {/*        </Grid>*/}\r\n                    {/*    )}*/}\r\n                    {/*</Grid>*/}\r\n                    <Box pb={2} display={\"flex\"} justifyContent={\"center\"} hidden={totalPages <= 1}>\r\n                        <Pagination count={totalPages} page={page} onChange={handlePageChange} showFirstButton\r\n                                    showLastButton/>\r\n                    </Box>\r\n                </TabPanel>\r\n            </TabContext>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Tasks","import React, {useEffect, useState} from \"react\";\r\nimport useAxios from \"../../services/api/useAxios\";\r\nimport {Box} from \"@mui/material\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport List from \"../../components/list/List\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\nconst Campaigns = () => {\r\n    const {getUserCampaigns, getSelectableCampaigns} = useAxios();\r\n    const navigate = useNavigate();\r\n    const {t} = useTranslation();\r\n\r\n    const [data, setData] = useState([]);\r\n    const [selectableCampaigns, setSelectableCampaigns] = useState([]);\r\n\r\n    useEffect(() => {\r\n        getUserCampaigns().then(res => setData(res));\r\n        getSelectableCampaigns().then(res => setSelectableCampaigns(res));\r\n    }, [])\r\n\r\n    const handleOpen = (id: number) => {\r\n        navigate(`/campaign/${id}/tasks`)\r\n    }\r\n\r\n    const handleSelect = (id: number) => {\r\n        navigate(`/campaign/${id}/about`)\r\n    }\r\n\r\n    return (\r\n        <Box px={3} py={1}>\r\n            <List id={\"user_campaigns\"} data={data} hideCreateButton={true} label={t(\"campaigns.user_campaigns\")} onSelect={handleOpen}/>\r\n            <List hidden={selectableCampaigns.length === 0} id={\"selectable_campaigns\"} data={selectableCampaigns} hideCreateButton={true} label={t(\"campaigns.selectable_campaigns\")} onSelect={handleSelect}/>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default Campaigns","import React, {useEffect, useState} from 'react';\r\nimport BuilderLayout from \"../../../components/layout/common-layouts/BuilderLayout\";\r\nimport {Button, Typography} from \"@mui/material\";\r\nimport useAxios from \"../../../services/api/useAxios\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport useHelpers from \"../../../utils/hooks/UseHelpers\";\r\nimport TextViewer from \"../../../components/text-editor/TextViewer\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\ntype Props = {};\r\n\r\nconst About = (props: Props) => {\r\n    const {} = props;\r\n    const {requestCampaignInfo, requestCampaignJoin} = useAxios();\r\n    const navigate = useNavigate();\r\n    const {campaignId} = useParams();\r\n    const {parseId} = useHelpers();\r\n    const parsedCampaignId = parseId(campaignId);\r\n    const {t} = useTranslation();\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [description, setDescription] = useState(\"\")\r\n    const [richText, setRichText] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        requestCampaignInfo(parsedCampaignId)\r\n            .then(res => {\r\n                const {richText, name, description} = res;\r\n                if (name) {\r\n                    setName(name)\r\n                }\r\n                if (description) {\r\n                    setDescription(description)\r\n                }\r\n                if (richText) {\r\n                    setRichText(richText)\r\n                }\r\n            })\r\n    }, [parsedCampaignId])\r\n\r\n    const joinCampaign = () => {\r\n        requestCampaignJoin(parsedCampaignId).then(() => navigate(`/campaign/${campaignId}/tasks`))\r\n    }\r\n\r\n    return (\r\n        <BuilderLayout>\r\n            <Typography variant={\"h3\"} align={\"center\"}>{name}</Typography>\r\n            <Typography variant={\"h6\"} align={\"center\"}>{description}</Typography>\r\n            {richText && <TextViewer data={richText}/>}\r\n            <Button variant={\"contained\"} color={\"warning\"} fullWidth onClick={joinCampaign}>{t(\"campaigns.join\")}</Button>\r\n        </BuilderLayout>\r\n    );\r\n};\r\n\r\nexport default About","import React, {useEffect, useState} from \"react\";\nimport {useParams} from \"react-router-dom\";\nimport {Grid, Typography} from \"@mui/material\";\nimport useHelpers from \"../../utils/hooks/UseHelpers\";\nimport useAxios from \"../../services/api/useAxios\";\nimport TextViewer from \"../../components/text-editor/TextViewer\";\n\n\nconst NotificationContent = () => {\n    const {id} = useParams();\n    const {parseId} = useHelpers();\n    const parsedId = parseId(id);\n    const {getNotificationContent} = useAxios();\n\n    const [data, setData] = useState<any>({})\n\n    useEffect(() => {\n        getNotificationContent(parsedId).then(res => setData(res))\n    }, [parsedId])\n\n    return (\n        <Grid container justifyContent={\"center\"}>\n            <Grid item xs={12} p={1}>\n                <Typography align={\"center\"} variant={\"h6\"}>{data.title}</Typography>\n            </Grid>\n            <Grid item xs={12}>\n                <TextViewer data={data.text}/>\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default NotificationContent","import React from \"react\";\r\nimport {HashRouter as Router, Route, Routes} from \"react-router-dom\";\r\nimport AuthProvider from \"./context/authentication/AuthProvider\";\r\nimport ToastProvider from \"./context/toast/ToastProvider\";\r\nimport RequireAuth from \"./pages/login/RequireAuth\";\r\nimport Layout from \"./components/layout/Layout\";\r\nimport Login from \"./pages/login/Login\";\r\nimport Tasks from \"./pages/tasks/Tasks\";\r\nimport Campaigns from \"./pages/campaigns/Campaigns\";\r\nimport About from \"./pages/campaigns/about/About\";\r\nimport Task from \"./pages/tasks/task/Task\";\r\nimport Notifications from \"./pages/notifications/Notifications\";\r\nimport NotificationContent from \"./pages/notifications/NotificationContent\";\r\n\r\nconst App = () => (\r\n    <AuthProvider>\r\n        <ToastProvider>\r\n            <Router>\r\n                <Routes>\r\n                    <Route path=\"/\" element={<RequireAuth><Layout/></RequireAuth>}>\r\n                        <Route path={\"campaign\"}>\r\n                            <Route path=\":campaignId\">\r\n                                <Route path={\"notifications\"}>\r\n                                    <Route path={\":id\"} element={<NotificationContent/>} />\r\n                                    <Route index element={<Notifications/>}/>\r\n                                </Route>\r\n                                <Route path={\"about\"} element={<About/>}/>\r\n                                <Route path={\"tasks\"}>\r\n                                    <Route path={\":taskId\"}>\r\n                                        <Route index element={<Task/>}/>\r\n                                    </Route>\r\n                                    <Route index element={<Tasks/>}/>\r\n                                </Route>\r\n                                <Route index element={<Tasks/>}/>\r\n                            </Route>\r\n                            <Route index element={<Campaigns/>}/>\r\n                        </Route>\r\n                        <Route index element={<Campaigns/>}/>\r\n                    </Route>\r\n                    <Route path={\"login\"} element={<Login/>}/>\r\n                </Routes>\r\n            </Router>\r\n        </ToastProvider>\r\n    </AuthProvider>\r\n)\r\n\r\nexport default App","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import i18next from \"i18next\";\r\nimport {initReactI18next} from \"react-i18next\";\r\n\r\nconst resources = {\r\n    en: {\r\n        translation: {\r\n            widgets: {\r\n                date_time_label: \"Date & Time\",\r\n                date_label: \"Date\"\r\n            },\r\n            returned: \"Returned\",\r\n            edit: \"Edit\",\r\n            accepted: \"Accepted\",\r\n            files: {\r\n                choose_files: \"Choose files\",\r\n                view_file: \"View\",\r\n                remove_file: \"Remove\"\r\n            },\r\n            notifications: {\r\n                title: \"Notifications\",\r\n                unread: \"Unread\",\r\n                read: \"Read\",\r\n            },\r\n            submit: \"Submit\",\r\n            open: \"Open\",\r\n            appbar: {\r\n                log_out: \"Log out\",\r\n                tasks: \"Tasks\",\r\n                notifications: \"Notifications\"\r\n            },\r\n            task: {\r\n                leave_page: \"Are you sure you want to leave this page?\",\r\n                returned_message: \"This task was returned\",\r\n                open_previous: \"Open previous\",\r\n                release: \"Release\",\r\n                submit: \"Submit\",\r\n                saved_message: \"Saved\",\r\n                divider_text: \"Current Task\"\r\n            },\r\n            sign_up_page: {\r\n                title: \"Register\",\r\n                description1: \"Click the button (Login or Register)\",\r\n                description2: \"If you don't have a Google account, please create one.\",\r\n                sign_up_button: \"Register\",\r\n            },\r\n            campaigns: {\r\n                user_campaigns: \"My campaigns\",\r\n                selectable_campaigns: \"Available campaigns\",\r\n                join: \"Join\",\r\n                details: \"Details\",\r\n            },\r\n            list_header: {\r\n                create: \"Create\",\r\n                grid: \"Grid\",\r\n                list: \"List\"\r\n            },\r\n            tasks: {\r\n                title: \"Tasks\",\r\n                completed: \"Completed\",\r\n                uncompleted: \"Uncompleted\",\r\n                available: \"Available\",\r\n            },\r\n            filter: {\r\n                chain_label: \"Chain\",\r\n                search_stage_label: \"Desired Stage\",\r\n                stage_label: \"Filter Stage\",\r\n                filter_label: \"Filter\",\r\n                field_label: \"Field\",\r\n                type_label: \"Field's type\",\r\n                types: [\"Text\", \"Number\", \"Date-Time\"],\r\n                conditions_label: \"Conditions\",\r\n                value_label: \"Value\",\r\n                value_description: \"If field's type is Date-Time, please write in format year-month-day. Example: 2022-04-03\",\r\n                operator_label: \"Operators\",\r\n                operators: [\"Equal\", \"Not equal\", \"Less\", \"Greater\", \"Less or Equal\", \"Greater or Equal\"],\r\n                search_button: \"Search\"\r\n            }\r\n        },\r\n    },\r\n    ru: {\r\n        translation: {\r\n            widgets: {\r\n                date_time_label: \"Дата и Время\",\r\n                date_label: \"Дата\"\r\n            },\r\n            returned: \"Возвращено\",\r\n            edit: \"Редактировать\",\r\n            accepted: \"Получен\",\r\n            files: {\r\n                choose_files: \"Выбрать файлы\",\r\n                view_file: \"Посмотреть файл\",\r\n                remove_file: \"Удалить\"\r\n            },\r\n            notifications: {\r\n                title: \"Уведомления\",\r\n                unread: \"Непрочитанные\",\r\n                read: \"Прочитанные\",\r\n            },\r\n            submit: \"Отправить\",\r\n            open: \"Открыть\",\r\n            appbar: {\r\n                log_out: \"Выход\",\r\n                tasks: \"Задания\",\r\n                notifications: \"Уведомления\"\r\n            },\r\n            task: {\r\n                leave_page: \"Вы уверены, что хотите покинуть эту страницу?\",\r\n                returned_message: \"Это задание было возвращено!\",\r\n                open_previous: \"Открыть предыдущее задание\",\r\n                release: \"Освободить задание\",\r\n                submit: \"Отправить\",\r\n                saved_message: \"Данные сохранены\",\r\n                divider_text: \"Текущая форма\"\r\n            },\r\n            sign_up_page: {\r\n                title: \"Регистрация\",\r\n                description1: \"Нажмите на кнопку (Вход или Регистрация).\",\r\n                description2: \"Если у вас нет аккаунта Google, то создайте его.\",\r\n                sign_up_button: \"Регистрация\",\r\n            },\r\n            campaigns: {\r\n                user_campaigns: \"Мои кампании\",\r\n                selectable_campaigns: \"Доступные кампании\",\r\n                join: \"Присоединиться\",\r\n                details: \"Подробнее\",\r\n            },\r\n            list_header: {\r\n                create: \"Создать\",\r\n                grid: \"Сетка\",\r\n                list: \"Список\"\r\n            },\r\n            tasks: {\r\n                title: \"Задания\",\r\n                completed: \"Завершенные\",\r\n                uncompleted: \"Невыполненные\",\r\n                available: \"Доступные\",\r\n            },\r\n            filter: {\r\n                chain_label: \"Цепочка\",\r\n                search_stage_label: \"Искомый Cтейдж\",\r\n                stage_label: \"Фильтрующий Стейдж\",\r\n                filter_label: \"Фильтр\",\r\n                field_label: \"Поле\",\r\n                type_label: \"Тип поля\",\r\n                types: [\"Текст\", \"Число\", \"Дата-Время\"],\r\n                conditions_label: \"Условия\",\r\n                value_label: \"Значение\",\r\n                value_description: \"Если тип поля Дата-Время, пожалуйста заполняйте в формате год-месяц-день. Пример: 2022-04-03\",\r\n                operator_label: \"Оператор\",\r\n                operators: [\"Равно\", \"Не равно\", \"Меньше\", \"Больше\", \"Меньше или Равно\", \"Больше или Равно\"],\r\n                search_button: \"Поиск\"\r\n            }\r\n        },\r\n    },\r\n};\r\n\r\ni18next\r\n    .use(initReactI18next)\r\n    .init({\r\n        resources,\r\n        lng: \"ru\",\r\n        supportedLngs: [\"en\", \"ru\"],\r\n        interpolation: {\r\n            escapeValue: false,\r\n        },\r\n    });\r\n\r\nexport default i18next;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"./services/localization/i18n\";\r\n\r\nReactDOM.render(\r\n    // <React.StrictMode>\r\n        <App/>,\r\n    // </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}